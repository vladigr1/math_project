\documentclass[12pt,leqno]{article}
%\documentclass[a4paper,12pt,twoside]{article}
%\documentclass[14pt,a4paper]{scrbook}

%\usepackage{float}
%\usepackage{listings}
%\usepackage{xkeyval}
%\usepackage{eucal}
%\usepackage{mathrsfs}
%\usepackage{theorem}
%\usepackage{pifont}
% \usepackage{bibtopic,wrapfig}
%\usepackage{bbding}
%\usepackage{fancyhdr}
%\usepackage{verbatim}
%\usepackage{bidi}




%\rhead{\thepage}
%\lfoot{\small \copyright\;\;\; שירה בר-דב, אורט בראודה}
%\rfoot{\thepage}
%\cfoot{}
%\renewcommand{\headrulewidth}{0.4pt}
%\renewcommand{\footrulewidth}{0.4pt}
%\DeclareGraphicsExtensions{.pdf,.png,.jpg}
%\let\arref\ref
%\renewcommand{\ref}[1]{\I{\arref{#1}}}




%\rhead{\thepage}
%\lfoot{\small \copyright\;\;\; שירה בר-דב, אורט בראודה}
%\rfoot{\thepage}
%\cfoot{}
%\renewcommand{\headrulewidth}{0.4pt}
%\renewcommand{\footrulewidth}{0.4pt}
%\DeclareGraphicsExtensions{.pdf,.png,.jpg}
%\let\arref\ref
%\renewcommand{\ref}[1]{\I{\arref{#1}}}

% \setlength{\parskip}{4pt plus 2pt} \setlength{\parindent}{0pt}
% \setlength{\oddsidemargin}{0pt} \setlength{\evensidemargin}{0pt}

%\numberwithin{equation}{section}

%\documentclass{amsart}
%%\usepackage[active]{srcltx} % SRC Specials for DVI Searching
%\usepackage {epsfig}
%% THEOREM Environments ---------------------------------------------------
% \newtheorem{thm}{Theorem}
% \newtheorem{cor}[thm]{Corollary}
% \newtheorem{lemma}[thm]{Lemma}
% \newtheorem{prop}[thm]{Proposition}
% \newtheorem{theorem}[thm]{Theorem}
% \theoremstyle{definition}
% \newtheorem{defn}[thm]{Definition}
% \theoremstyle{remark}
% \newtheorem{rem}[thm]{Remark}
%% MATH -------------------------------------------------------------------
%%%% ----------------------------------------------------------------------
%\setlength{\textheight}{43pc} \setlength{\textwidth}{28pc}
%

%%%%%% Jupyter paereamble
%\pagenumbering{gobble}
\usepackage[breakable]{tcolorbox}
\usepackage{parskip} % Stop auto-indenting (to mimic markdown behaviour)

\usepackage{iftex}
\usepackage{mathpazo}

% Basic figure setup, for now with no caption control since it's done
% automatically by Pandoc (which extracts ![](path) syntax from Markdown).
\usepackage{graphicx}
% Maintain compatibility with old templates. Remove in nbconvert 6.0
\let\Oldincludegraphics\includegraphics
% Ensure that by default, figures have no caption (until we provide a
% proper Figure object with a Caption API and a way to capture that
% in the conversion process - todo).
\usepackage{caption}
%\DeclareCaptionFormat{nocaption}{}
%\captionsetup{format=nocaption,aboveskip=0pt,belowskip=0pt}

\usepackage{float}
\floatplacement{figure}{H} % forces figures to be placed at the correct location
\usepackage{xcolor} % Allow colors to be defined
\usepackage{enumerate} % Needed for markdown enumerations to work
%\usepackage{geometry} % Used to adjust the document margins
% \usepackage{amsmath} % Equations
% \usepackage{amssymb} % Equations
\usepackage{textcomp} % defines textquotesingle
% Hack from http://tex.stackexchange.com/a/47451/13684:
\AtBeginDocument{%
    \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
}
\usepackage{upquote} % Upright quotes for verbatim code
\usepackage{eurosym} % defines \euro
\usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
\usepackage{fancyvrb} % verbatim replacement that allows latex
\usepackage{grffile} % extends the file name processing of package graphics 
                        % to support a larger range
\makeatletter % fix for old versions of grffile with XeLaTeX
\@ifpackagelater{grffile}{2019/11/01}
{
    % Do nothing on new versions
}
{
    \def\Gread@@xetex#1{%
    \IfFileExists{"\Gin@base".bb}%
    {\Gread@eps{\Gin@base.bb}}%
    {\Gread@@xetex@aux#1}%
    }
}
\makeatother
\usepackage[Export]{adjustbox} % Used to constrain images to a maximum size
\adjustboxset{max size={0.9\linewidth}{0.9\paperheight}}

% The hyperref package gives us a pdf with properly built
% internal navigation ('pdf bookmarks' for the table of contents,
% internal cross-reference links, web links for URLs, etc.)
% \usepackage{hyperref}
% The default LaTeX title has an obnoxious amount of whitespace. By default,
% titling removes some of it. It also provides customization options.
\usepackage{titling}
\usepackage{longtable} % long table support required by pandoc >1.10
\usepackage{booktabs}  % table support for pandoc > 1.12.2
\usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
\usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                            % normalem makes italics be italics, not underlines
\usepackage{mathrsfs}
    



% User packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{amsmath,amssymb}
\usepackage{amsthm}
\usepackage{import}
%\theoremstyle{plain}
\newtheoremstyle{theoremdd}% name of the style to be used
  {\topsep}% measure of space to leave above the theorem. E.g.: 3pt
  {\topsep}% measure of space to leave below the theorem. E.g.: 3pt
  {\itshape}% name of font to use in the body of the theorem
  {0pt}% measure of space to indent
  {\bfseries}% name of head font
  {:}% punctuation between head and body
  { }% space after theorem head; " " = normal inter word space
  {\thmname{#1}\thmnumber{ #2}\thmnote{ #3}} % Manually specify head
\theoremstyle{theoremdd}
%\usepackage{color} %red, green, blue, yellow, cyan, magenta, black, white
% \definecolor{mygreen}{RGB}{28,172,0} % color values Red, Green, Blue
% \definecolor{mylilas}{RGB}{170,55,241}
% \usepackage{graphicx}
% \usepackage{epstopdf}
% \usepackage{epsfig}
\usepackage[hyperindex,colorlinks]{hyperref}
%\usepackage[colorlinks=true, bookmarks=true]{hyperref}
\usepackage{subcaption}
%\usepackage{mathtools}
%\usepackage{pdfpages}
\linespread{1.4}
\usepackage[lmargin=1in,rmargin=1in,tmargin=1in]{geometry}
\usepackage{xcolor,colortbl}
\usepackage{fontspec}
\usepackage{polyglossia}
\usepackage{array}
\usepackage{chngcntr}
\setdefaultlanguage{hebrew}
\setotherlanguages{english}
\newfontfamily\hebrewfont[Script=Hebrew]{David}
% It's a clear bug in how Polyglossia manages the situation, 
% as it seems not taking into account the current language. 
% A temporary workaround is to say
% This assuming that you don't need Hebrew in the minted environment.
\let\hebrewfonttt\ttfamily
%\usepackage{bidi}

% User defined macros
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheorem{definition}{הגדרה}[section]
\newtheorem{theorem}{משפט}[section]
\newtheorem{proposition}{טענה}[section]
\newtheorem{conjecture}{השערה}[section]
\newtheorem{corollary}{מסקנה}[section]
\newtheorem{lemma}{למה}[section]
\newtheorem{example}{דוגמה}[section]
\newtheorem{comm}{הערה}[section]
\counterwithin{figure}{section}

\newcommand{\sumi}[1]{\sum_{#1=1}^n}
\newcommand{\Zn}{{\mathbb{Z}_2}^n}
\newcommand{\Col}{\mathrm{Col}}
\newcommand{\Nul}{\mathrm{Nul}}
    

    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}
    \definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
    \definecolor{ansi-default-inverse-bg}{HTML}{000000}

    % common color for the border for error outputs.
    \definecolor{outerrorbackground}{HTML}{FFDFDF}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatibility definitions
    \def\gt{>}
    \def\lt{<}
    \let\Oldtex\TeX
    \let\Oldlatex\LaTeX
    \renewcommand{\TeX}{\textrm{\Oldtex}}
    \renewcommand{\LaTeX}{\textrm{\Oldlatex}}
    % Document parameters
    % Document title
    \title{light\_out}
    
    
    
    
    
% Pygments definitions
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\@namedef{PY@tok@w}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\@namedef{PY@tok@c}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@cp}{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\@namedef{PY@tok@k}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kt}{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\@namedef{PY@tok@o}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ow}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@nb}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nf}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@ne}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\@namedef{PY@tok@nv}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@no}{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\@namedef{PY@tok@nl}{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\@namedef{PY@tok@ni}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\@namedef{PY@tok@na}{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\@namedef{PY@tok@nt}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nd}{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@s}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sd}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@si}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\@namedef{PY@tok@se}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\@namedef{PY@tok@sr}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\@namedef{PY@tok@ss}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sx}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@m}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@gh}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@gu}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\@namedef{PY@tok@gd}{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\@namedef{PY@tok@gi}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\@namedef{PY@tok@gr}{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\@namedef{PY@tok@ge}{\let\PY@it=\textit}
\@namedef{PY@tok@gs}{\let\PY@bf=\textbf}
\@namedef{PY@tok@gp}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@go}{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\@namedef{PY@tok@gt}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\@namedef{PY@tok@err}{\def\PY@bc##1{{\setlength{\fboxsep}{\string -\fboxrule}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}}
\@namedef{PY@tok@kc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kd}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kr}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@bp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@fm}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@vc}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vg}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vi}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vm}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sa}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sb}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sc}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@dl}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s2}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sh}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s1}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@mb}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mf}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mh}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mi}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@il}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mo}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ch}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@cm}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@cpf}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@c1}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\@namedef{PY@tok@cs}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % For linebreaks inside Verbatim environment from package fancyvrb. 
    \makeatletter
        \newbox\Wrappedcontinuationbox 
        \newbox\Wrappedvisiblespacebox 
        \newcommand*\Wrappedvisiblespace {\textcolor{red}{\textvisiblespace}} 
        \newcommand*\Wrappedcontinuationsymbol {\textcolor{red}{\llap{\tiny$\m@th\hookrightarrow$}}} 
        \newcommand*\Wrappedcontinuationindent {3ex } 
        \newcommand*\Wrappedafterbreak {\kern\Wrappedcontinuationindent\copy\Wrappedcontinuationbox} 
        % Take advantage of the already applied Pygments mark-up to insert 
        % potential linebreaks for TeX processing. 
        %        {, <, #, %, $, ' and ": go to next line. 
        %        _, }, ^, &, >, - and ~: stay at end of broken line. 
        % Use of \textquotesingle for straight quote. 
        \newcommand*\Wrappedbreaksatspecials {% 
            \def\PYGZus{\discretionary{\char`\_}{\Wrappedafterbreak}{\char`\_}}% 
            \def\PYGZob{\discretionary{}{\Wrappedafterbreak\char`\{}{\char`\{}}% 
            \def\PYGZcb{\discretionary{\char`\}}{\Wrappedafterbreak}{\char`\}}}% 
            \def\PYGZca{\discretionary{\char`\^}{\Wrappedafterbreak}{\char`\^}}% 
            \def\PYGZam{\discretionary{\char`\&}{\Wrappedafterbreak}{\char`\&}}% 
            \def\PYGZlt{\discretionary{}{\Wrappedafterbreak\char`\<}{\char`\<}}% 
            \def\PYGZgt{\discretionary{\char`\>}{\Wrappedafterbreak}{\char`\>}}% 
            \def\PYGZsh{\discretionary{}{\Wrappedafterbreak\char`\#}{\char`\#}}% 
            \def\PYGZpc{\discretionary{}{\Wrappedafterbreak\char`\%}{\char`\%}}% 
            \def\PYGZdl{\discretionary{}{\Wrappedafterbreak\char`\$}{\char`\$}}% 
            \def\PYGZhy{\discretionary{\char`\-}{\Wrappedafterbreak}{\char`\-}}% 
            \def\PYGZsq{\discretionary{}{\Wrappedafterbreak\textquotesingle}{\textquotesingle}}% 
            \def\PYGZdq{\discretionary{}{\Wrappedafterbreak\char`\"}{\char`\"}}% 
            \def\PYGZti{\discretionary{\char`\~}{\Wrappedafterbreak}{\char`\~}}% 
        } 
        % Some characters . , ; ? ! / are not pygmentized. 
        % This macro makes them "active" and they will insert potential linebreaks 
        \newcommand*\Wrappedbreaksatpunct {% 
            \lccode`\~`\.\lowercase{\def~}{\discretionary{\hbox{\char`\.}}{\Wrappedafterbreak}{\hbox{\char`\.}}}% 
            \lccode`\~`\,\lowercase{\def~}{\discretionary{\hbox{\char`\,}}{\Wrappedafterbreak}{\hbox{\char`\,}}}% 
            \lccode`\~`\;\lowercase{\def~}{\discretionary{\hbox{\char`\;}}{\Wrappedafterbreak}{\hbox{\char`\;}}}% 
            \lccode`\~`\:\lowercase{\def~}{\discretionary{\hbox{\char`\:}}{\Wrappedafterbreak}{\hbox{\char`\:}}}% 
            \lccode`\~`\?\lowercase{\def~}{\discretionary{\hbox{\char`\?}}{\Wrappedafterbreak}{\hbox{\char`\?}}}% 
            \lccode`\~`\!\lowercase{\def~}{\discretionary{\hbox{\char`\!}}{\Wrappedafterbreak}{\hbox{\char`\!}}}% 
            \lccode`\~`\/\lowercase{\def~}{\discretionary{\hbox{\char`\/}}{\Wrappedafterbreak}{\hbox{\char`\/}}}% 
            \catcode`\.\active
            \catcode`\,\active 
            \catcode`\;\active
            \catcode`\:\active
            \catcode`\?\active
            \catcode`\!\active
            \catcode`\/\active 
            \lccode`\~`\~ 	
        }
    \makeatother

    \let\OriginalVerbatim=\Verbatim
    \makeatletter
    \renewcommand{\Verbatim}[1][1]{%
        %\parskip\z@skip
        \sbox\Wrappedcontinuationbox {\Wrappedcontinuationsymbol}%
        \sbox\Wrappedvisiblespacebox {\FV@SetupFont\Wrappedvisiblespace}%
        \def\FancyVerbFormatLine ##1{\hsize\linewidth
            \vtop{\raggedright\hyphenpenalty\z@\exhyphenpenalty\z@
                \doublehyphendemerits\z@\finalhyphendemerits\z@
                \strut ##1\strut}%
        }%
        % If the linebreak is at a space, the latter will be displayed as visible
        % space at end of first line, and a continuation symbol starts next line.
        % Stretch/shrink are however usually zero for typewriter font.
        \def\FV@Space {%
            \nobreak\hskip\z@ plus\fontdimen3\font minus\fontdimen4\font
            \discretionary{\copy\Wrappedvisiblespacebox}{\Wrappedafterbreak}
            {\kern\fontdimen2\font}%
        }%
        
        % Allow breaks at special characters using \PYG... macros.
        \Wrappedbreaksatspecials
        % Breaks at punctuation characters . , ; ? ! and / need catcode=\active 	
        \OriginalVerbatim[#1,codes*=\Wrappedbreaksatpunct]%
    }
    \makeatother

    % Exact colors from NB
    \definecolor{incolor}{HTML}{303F9F}
    \definecolor{outcolor}{HTML}{D84315}
    \definecolor{cellborder}{HTML}{CFCFCF}
    \definecolor{cellbackground}{HTML}{F7F7F7}
    
    % prompt
    \makeatletter
    \newcommand{\boxspacing}{\kern\kvtcb@left@rule\kern\kvtcb@boxsep}
    \makeatother
    \newcommand{\prompt}[4]{
        {\ttfamily\llap{{\color{#2}[#3]:\hspace{3pt}#4}}\vspace{-\baselineskip}}
    }
    

    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}



\begin{document}

\begin{titlepage}
\newcommand{\HRule}{\rule{\linewidth}{0.5mm}} % Defines a new command for the horizontal lines, change thickness here

\center % Center everything on the page
%----------------------------------------------------------------------------------------
%   LOGO SECTION
%----------------------------------------------------------------------------------------
\begin{figure}[ht]
	\begin{center}
		{\includegraphics[scale=0.5]{images/Braude_Logo.jpg}}
	\end{center}
%	\caption{הפונקציה $\arctan(x)$ - באדום, וסכום שלושת האיברים הראשונים של טור טיילור שלה - בכחול}
%	\label{atan}
\end{figure}
%----------------------------------------------------------------------------------------
%   HEADING SECTIONS
%----------------------------------------------------------------------------------------

{\LARGE 
המחלקה למתמטיקה שימושית
 % Major heading such as course name
}
\vspace{20pt}

%----------------------------------------------------------------------------------------
%   TITLE SECTION
%----------------------------------------------------------------------------------------

\HRule \\[0.4cm]
{ \huge \bfseries
חקירת משחק האורות
% Title of your document
 } \\[0.4cm] 
\HRule \\[1.5cm]

%----------------------------------------------------------------------------------------
%   AUTHOR SECTION
%----------------------------------------------------------------------------------------
\hspace{50pt}  
\begin{minipage}{0.4\textwidth}
    \begin{flushright} \large
    מאת:
    \\
    ולדיסלב ברקנס
    \end{flushright}
\end{minipage}
    ~
\begin{minipage}{0.4\textwidth}
    \begin{flushright} \large
    מנחה:
    \\
    אלכס גולוורד 
    % Supervisor's Name
    \end{flushright}
\end{minipage}\\[2cm]

%----------------------------------------------------------------------------------------
%   DATE SECTION
%----------------------------------------------------------------------------------------

{\large \today} \\[2cm] % Date, change the \today to a set date if you want to be precise

%\includegraphics[scale=0.3]{Braude_Logo}\\[1cm] % Include a department/university logo - this will require the graphics package
%----------------------------------------------------------------------------------------

\vfill % Fill the rest of the page with whitespace

\end{titlepage}
%----------------------------------------------------------------------------------------
%   תוכן עניינים
%----------------------------------------------------------------------------------------
\tableofcontents

\newpage
%--------------------------------------------------------------------------------------
%   הקדמה
%----------------------------------------------------------------------------------------
\section{הקדמה}
פרויקט זה הינו פרויקט סוף של סטודנט במחלקה למתמטיקה שימושית.
הפרויקט 
חוקר את משחק האורות 
המטרה המקורית של הפרויקט הייתה למצוא פתרונות למשחק, אך במהלך המחקר
העלנו שאלות נוספות.

נציג שתי שיטות למציאת פתרון של המשחק,
בתחילה השיטות נראו שונות אבל בפרויקט הראינו דמיון ביניהם.

דבר מרכזי נוסף שעסקנו בו הוא בחיפוש פתרונות אופטימליים,
מהו פתרון אופטימלי נגדיר בהגדרה
\ref{def: opt-sol}
,
פתרונות אילו הם מועטים והוכחנו הגבלה לגודל הלוחות הקיימים להם פתרונות.

במהלך הפרויקט ראינו שבמשחק המתחיל כאשר כל הנורות דלוקות קיים לפחות פתרון אחד,
תופעה זו העסיקה רבות את הפרויקט ונציג הוכחה
לקיום התופעה.

עבודה סוף זו הייתה מהנה עבורי אני מודה למחלקה
למתמטיקה שימושית,
במיוחד לאלכס גולוורד על הזדמנות לעשות 
עבודה מרתקת שכזה.
עבודה זה לימדה אותי המון ונתנה לי את האומץ להשתמש בכלים שלמדתי במהלך התואר.
\newpage
\section{תיאור של המשחק}
משחק האורות,  בלועזית
\textenglish{Lights Out}
,
הוא
חידה המנוסחת עבור לוח משבצות מלבני
שהתפרסמה  כמשחק אלקטרוני.
המשחק פורסם בשם זה 
בשנת 
$1995$
על לוח 
$5 \times 5$.
קיימים 
משחק דומים שעוד פורסמו לפני
כן,
כמו מרלין
,
\textenglish{Merlin}
,
שפורסם בשנת 
$1970$
עבור לוח 
$3 \times 3$.
במשחק האורות
כל משבצת יכולה להיות באחד משני מצבים, נקרא להם דלוק וכבוי.
כאשר משתמשים בשמות האלו מתכוונים שבכל משבצת יש נורה והיא יכולה להיות דלוקה או כבויה. במצב התחלתי כל הנורות כבויות.
יש לנו לוח בקרה שמאפשר בכל שלב של המשחק ללחוץ על משבצת ולשנות את מצב הנורה, אם היא דלוקה אז ניתן לכבות אותה ואם היא כבויה אז ניתן להדליק אותה.
לוח הבקרה בנוי בצורה כזאת שכאשר מתבצעת לחיצה על משבצת אז מצבה של הנורה משתנה, בנוסף משתנים גם מצבם של הנורות הסמוכות לה.
שתי נורות נקראות סמוכות אם הן נמצאות במשבצות בעלות צלע משוטפת.
המטרה של המשחק היא לעבור ממצב התחלתי שבו כל הנרות כבויות, למצב בו כל הנורות יהיו דולקות. 
\begin{comm}
מצבם התחלתי של נורות המשחק, דלוקות או כבויות, אינה משנה את תוצאות המשחק.
\end{comm}
מטרתה של ההערה להדגיש כי
מטרתו של המשחק היא להעביר
 את הלוח ממצב אחד בו נמצאים כל הנורות למצב האחר,
 וכי אין השפעה למראה של מצבים.
 
\subsection{תיאור גרפי של המשחק}
באיור הבאה נגדיר:
מצב התחלתי הוא מצב בו כל נורות
צהובות.
מצב סופי הוא מצב בו כל נורות שחורות.
לחיצה על משבצת תסומן על ידי צביעת גבולותיה בירוק.

\begin{figure}[ht]
    \caption{הסבר שינוי מצב הלוח לאחר לחיצה}
    \centering
    \label{fig: explain game}
    \begin{subfigure}{.3\textwidth}
        % \unsethebrew
        \caption{לוח במצב התחלתי}
        \label{subfig: explain game, start}
        \centering
        \includegraphics[scale=0.67]{images/4x4_start_board.PNG}
        % \sethebrew
    \end{subfigure}%
    \begin{subfigure}{.3\textwidth}
        % \unsethebrew
        \caption{לוח לאחר לחיצה בודדת}
        \label{subfig: explain game, move}
        \centering
        \includegraphics[scale=0.67]{images/4x4_press.PNG}
        % \sethebrew
    \end{subfigure}%
    \begin{subfigure}{.3\textwidth}
        % \unsethebrew
        \caption{לוח לאחר שני לחיצות}
        \label{subfig: explain game, next move}
        \centering
        \includegraphics[scale=0.67]{images/4x4_next_press.PNG}
        % \sethebrew
    \end{subfigure}%
\end{figure}

פירוט:
באיור
\ref{subfig: explain game, start}
מתואר מצב התחלתי.
באיור 
\ref{subfig: explain game, move}
ניתן לראות 
את השפעה של לחיצה על משבצת שמסומן בירוק.
באיור
\ref{subfig: explain game, next move}
ניתן לראות השפעה לחיצה נוספת.

לשם הבנה מומלץ לנסות את המשחק,
כפי שנאמר "עדיף לראות פעם אחת, מאשר לשמוע מאה פעמים"
או במקרה שלנו לשחק.
את המשחק אפשר לשחק  
\href{https://www.geogebra.org/m/JexnDJpt#chapter/301822}{
    בקישור הבא
}.

האתגר במשחק הוא שאין אסטרטגיה גלויה
לכן, במשחקים רבים מנסים להגיע למצבים שפתרון כבר ידוע.

\subsection{סוגיות בהן נעסוק בפרויקט}
\begin{enumerate}
	\item 
תיאור ודיון בשני אלגוריתמים למציאת פתרון המשחק.
	\item 
הוכחה לקיום פתרון המשחק לכל לוח
	$m\times n$.
	\item 
הרחבה של משחק על לוח למשחק על גרף.
    \item 
נעסוק במספר הפתרון האפשריים בלוח ונדבר על חסם מספר הפתרונות האפשריים.
	\item 
חיפוש לוחות בהם קיים פתרון בו הנורות שינו את מצבם פעם אחת.
    \item 
נציג שיטה למציאת פתרונות בהם כל נורה תשנה את מצבה פעם אחת.
\end{enumerate}
בנוסף, קיימות שאלות רבות הקשורות למשחק
ובפרויקט ננסה להציג פתרון לחלקן.
יתרה מזאת, נרצה להציג תופעות מעניינות, ולהראות
שהמשחק אינו רק מהנה אלא גם מהווה אתגר מתמטי לא קטן.

\subsection{תיאור משחק על גרף}
אחרי שתיארנו את המשחק על לוח, נתאר את המשחק על גרף.
נזכיר שגרף זה מבנה המכיל קשתות וצמתים, קשתות מוגדרות כצירוף סדור של שני צמתים.
כדי לתאר את משחק האורות על גרף נשתמש באותם כללים שהגדרנו.
במשחק על גרף הצמתים הם המשבצות
לכן, לחיצה על צומת הופכת את מצבה ומצב שכניה.
נגדיר שזוג צמתים יקראו שכנים אם קיימת
קשת המחברת ביניהם.
מטרת המשחק לעבור מגרף שכל הצמתים במצב התחלתי למצב סופי.

\begin{figure}[H]
    \caption{משחק על גרף לדוגמה}
    \label{fig: start game in graph}
    \begin{subfigure}{.5\textwidth}
        % \unsethebrew
        \centering
        \caption{מצב התחלתי}
        \label{subfig: graph game start}
        \includegraphics[scale=0.7]{images/graph_start_board.png}
        % \sethebrew
    \end{subfigure}%
    \begin{subfigure}{.5\textwidth}
        % \unsethebrew
        \centering
        \caption{לחיצה על משבצת מסומנת}
        \label{subfig: graph game move}
        \includegraphics[scale=0.7]{images/graph_press.png}
        % \sethebrew
    \end{subfigure}%
\end{figure}

נמחיש זאת על דוגמה שבאיור
\ref{fig: start game in graph}.
איור 
\ref{subfig: graph game start}
מתאר את מצב התחלתי, נסמן את המצב התחלתי של צומת בצבע כחול.
איור
\ref{subfig: graph game move}
מתאר לחיצה על צומת שצבוע בירוק.
לחיצה זה שינתה את הצמתים השכנות למצבם הסופי שמסומן בצבע אדום.
\begin{comm}
    בפועל צומת ירוקה גם נצבעת באדום הצביעה לירוק נועדה להצגה.
\end{comm}
בפרקים מתקדמים יותר נראה קשר בין המשחק ולאחת משיטות ייצוג גרפים
,
ייצוג בעזרת מטריצת שכנויות.
\begin{definition}
    \label{def:graphs-neighbor-matrix}
    תהי גרף 
    $G = (V,E)$,
    כאשר 
    $V$
    קבוצת הקודקודיים 
    ו
    $E$
    קבוצת הקשתות של הגרף.
    נסמן  
    $|V| = n$.
    נגדיר את מטריצה 
    $A \in \mathbb{R}^{n,n} $
    כך:
    \[ A[i,j] = 
    \begin{cases}
        1 & \text{if} \ (i,j) \in E \\
        0 & \text{if} \ (i,j) \notin E
    \end{cases}
    \]
    מטריצה 
    $A$
    נקראת מטריצת שכנויות של הגרף.
\end{definition}

\subsection{השוואה בין משחק על לוח למשחק על גרף}
נרצה להראות כי משחק על לוח הוא סוג של משחק על גרף
כלומר, כל משחק על לוח ניתן לתאר בעזרת משחק על גרף.

נתאר משחק על לוח כמשחק על גרף בעזרת הכללים הבאים:
\begin{enumerate}
    \item 
    כל משבצת במשחק על לוח נהפוך לצומת.
    \item 
    כל זוג משבצות סמוכות על לוח נחבר בקשת בגרף.
\end{enumerate}

לדוגמה, ניקח לוח
$2 \times 3$
נמספר את המשבצות כמו באיור
\ref{2x3_board}.
הגרף המתקבל מתואר באיור
\ref{2x3_graph}.

\begin{figure}[ht]
    \caption{
        דוגמה
        למשחק על לוח שתורגם למשחק על גרף
        }
    % \label{fig: start game in graph}
    \begin{subfigure}{.5\textwidth}
        \caption{
            משחק על לוח
            $2 \times 3$
            שמשבצותיו
            ממוספר
        }
        \label{2x3_board}
        % \unsethebrew
        \centering
        \includegraphics[scale=.95]{images/2x3_board.PNG}
        % \sethebrew
    \end{subfigure}%
    \begin{subfigure}{.5\textwidth}
        \caption{
            משחק על גרף
            שתורגם מלוח
            $2 \times 3$
        }
        % \unsethebrew
        \centering
        \label{2x3_graph}
        \includegraphics[scale=0.8]{images/2x3_graph.png}
        % \sethebrew
    \end{subfigure}%
\end{figure}

\begin{comm}
קיימים משחקים רבים שניתן לתאר על גרף אך, לא ניתן לתאר אותם על לוח.
לדוגמה, גרף בו יש צומת אם יותר מ
$4$
שכנים
לא ניתן לתאר על לוח מכיוון
שלכל
משבצת על לוח
יש לכל היותר
$4$
משבצות סמוכות.
\end{comm}
\begin{comm}
    בעזרת השיטה שתיארנו אפשר לתאר כל משחק על לוח כמשחק על גרף, אבל ההפך הוא לא נכון.
כלומר, לא כל משחק על גרף אפשר לתאר כמשחק על לוח.
\end{comm}
מכיוון שמשחק על לוח ניתן לתאר כמשחק על גרף לכן, טענות שמתקיימות
במשחק על גרף נכונות במשחק על לוח.

\newpage

\section{אלגוריתם למציאת פתרון}
לפני שנציג את שיטות למציאת פתרון, נרצה להמחיש את 
האתגר במשחק על ידי הצגה מספר תופעות שמתקיימות במשחק.
באיור
\ref{fig:sol_3_4_5}
מוצגים מספר פתרונות אפשריים ללוחות שונים, לחיצה על הלחצנים הירוקים
בסדר כלשהו תוביל לפתרון המשחק.
ניתן לראות שמספר הלחיצות הנדרשות לפתרון לוח
$4 \times 4$
קטן ממספר הלחיצות הנדרשות לפתרון לוח
$3 \times 3$.
אפשר היה לחשוב שככל שהלוח גדול יותר נדרשות יותר לחיצות 
כדי להגיע לפתרון,
אך, ניתן לראות באיור
\ref{fig:sol_3_4_5}
זה לא נכון.
תופעה נוספת המתקיימת במשחק היא שכמות הפתרונות עבור לוחות שונים משתנה.
עבור לוח 
$3 \times 3$
קיים פתרון יחיד,
אולם ללוח 
$4 \times 4$
קיימים
$16$
פתרונות.
באופן מפתיע, ללוח 
$5 \times 5$
קיימים רק 
$4$.
תופעה זה מפתיע משום שאפשר היה לצפות שככל שהלוח גדול יותר
כך, מספר הפתרונות יגדל.
על מנת לחדד תופעה זו, נסתכל על לוחות ריבועים 
($n \times n$).
נשאל מהו המימד של הלוח אם הכי הרבה פתרונות ומהו מספר פתרונות ללוח זה כאשר
$n \in [1,20]$?
התוצאה המתקבלת היא שמספר הפתרונות הגדול ביותר הוא כאשר
$n = 19$ 
ומספר הפתרונות הוא
$65,536$.
בנוסף
$n = 19$ 
הוא הלוח היחיד ב
$n \in [1,20]$
המקבל את מספר פתרונות זה.
לאומת זאת
מספר הפתרונות השני בגודלו הוא
$256$
ומתקיים בעבור
$n \in \{9, 16 \}$.

\begin{figure}[ht]
    \caption{פתרונות של משחק על לוחות שונים}
    % \unsethebrew
    \label{fig:sol_3_4_5}
    \centering
    \begin{subfigure}[b]{.25\linewidth}
    \includegraphics[width=0.95\linewidth]{images/3x3_sol.PNG}
    \end{subfigure}
    \begin{subfigure}[b]{.25\linewidth}
    \includegraphics[width=0.97\linewidth]{images/4x4_sol.PNG}
    \end{subfigure}
    \begin{subfigure}[b]{.25\linewidth}
    \includegraphics[width=0.95\linewidth]{images/5x5_sol.PNG}
    \end{subfigure}
\end{figure}

שתי גישות למציאת פתרון שנציג בעבודה מבוססות
על מידול הבעיה לשדה לינארי ולמערכת משוואות שפתרונה יוביל לפתרון המשחק.
נתאר את השיטות אומנם, בתחילה הן נראות שונות אך,
נציג את הקשר ביניהן.

\newpage
\subsection{אלגוריתם שמבוסס על מטריצת שכנויות}
\label{subsec:neighborhood-matrix-alg}
כדי למדל את הבעיה על ידי מערכת משוואות לינאריות
נשתמש במשחק כפי שהוא מתואר על גרף.
 לחיצה על צומת משנה את מצב הצומת ומצב שכנותיה.
נסמן את הצמתים ב
$i$.
נתאר את המשחק בצורה אלגברית:
\begin{enumerate}
    \item 
כל צומת יכול להיות בשנים מצבים,
את המצבים נסמן:
    $\{0,1\}$.
    \item 
מצב של צומת 
    $i$
נסמן ב
    $n_i$.
    \item 
    בתחילת המשחק מצבו של כל צומת הוא 
    $0$.
    \item 
    משחק מסתיים כאשר מצבם של צמתים 
    הוא 
    $1$.
\end{enumerate}
\begin{comm}
    עבור משחקים על לוח נתאר את המשבצות ומצבם הנוכחים ב
    $a_{i,j}$.
    זאת מכיוון שמשחק על לוח ניתן לתאר בעזרת מטריצה.
\end{comm}
\begin{comm}
\label{comm: sum as press operator on board}
פעולת לחיצה על לחצן משנה 
את מצב המנורה,
שינוי מצב מנורה ניתן לתאר בעזרת חיבור בשדה 
$\mathbb{Z}_2$.
נורה שמצבה הוא
$n_i$
לאחר לחיצה תעבור למצב
$n_i + 1$.
\end{comm}
\begin{lemma}
    \label{lemma: order presses}
    נניח שלוח נמצא במצב
    $X$
    .
    לחיצה על משבצת
    $i$
    ואחר כך על משבצת
    $j$
    מעבירות את הלוח מצב
    $X$
    למצב
    $Y$.
    לחיצה על משבצת
    $j$
    ואחר כך על משבצת
    $i$
    מעבירות את הלוח ממצב
    $X$
    למצב
    $Z$
    .
    נוכיח ש
    $Y=Z$.
\end{lemma}
\begin{proof}
    אם למשבצות 
    $i,j$
    אין שכנים משותפים אז מובן ש
    $Y=Z$
    .
    נניח ש
    $k$
    משבצת שכנה ל
    $i$
    ול
    $j$
    . 
    לכן מצב של 
    $k$
    משתנה פעמיים,
    גם כאשר לוחצים קודם על
    $i$
    ואחר כך על 
    $j$
    וגם כאשר לוחצים קודם על 
    $j$
    .
\end{proof}
\begin{corollary}
    התכונה הזאת מאפשרת למדל את סדרת הלחיצות
    על ידי חיבור כי הוכחנו שהרכבה של שתי לחיצות היא
    פעולה קומוטטיבית וחיבור היא פעולה קומוטטיבית. 
\end{corollary}
\begin{comm}
    למה
    \ref{lemma: order presses}
    נכונה גם עבור מספר משבצות שמעוניינים ללחוץ גדול מ
    $2$.
\end{comm}
\begin{comm}
    מספר זוגי של לחיצות על צומת יחידה אינו משנה את מצב הלוח.
\end{comm}
\begin{proof}
    כאשר מספר הלחיצות הוא זוגי מספר השינויים של משבצת
    ושל שכנותיה הוא זוגי כלומר, מצבן לא ישתנה.
\end{proof}
\begin{corollary}
    \label{corollary:gamplay-desc-single-press-key}
    בעבור משבצת מסוימת שנלחצה 
    $m$
    פעמים.
    מצב הלוח
    היה זהה אם 
    למצב בו הינו לוחצים 
    על אותה משבצת
    $m$
    מודולו
    $2$
    פעמים.
\end{corollary}
מסקנה
\ref{corollary:gamplay-desc-single-press-key}
ממחישה 
שכדי לתאר פתרון של משחק מספיק לתאר רק את המשבצות שנלחצו.
\begin{lemma}
    \label{lemma: num presses}
    מספר הווריאציות השונות של לחיצות על לוח
    $m \times n$
    הוא 
    $2^{m \cdot n}$
\end{lemma}
\begin{proof}
לפי הערה 
\ref{corollary:gamplay-desc-single-press-key}
כל לחצן יכול להיות בשתי מצבים,
לכן כל לחצן יש לו 
$2$
וריאציות,
נלחץ או לא נלחץ.
לפי
למה
\ref{lemma: order presses}
סדר הלחיצות לא משנה,
לכן ללוח
$m \times n$
מספר האפשרויות ללחיצה 
$2^{m \cdot n}$.
\end{proof}
כדי להבין כמה גדול
$2^{m \cdot n}$
נסתכל על לוח 
$6 \times 6$.
כמות האפשרויות ללחיצה גדולה 
מכמות המספרים שמציגים מספרים שלמים במחשב
(
$4$
בתים
).
המספר הגדול ביותר שאפשר להציג בעזרת 
$4$
בתים
הוא
$2^{32}-1$.
המטרה של המחשה זו היא להדגיש כמה לא פרקטי לנסות לפתור בעזרת
מעבר על כל האופציות.

נתאר את המשחק 
בצורה וקטורית
(
בעזרת הערה 
\ref{comm: sum as press operator on board}
).
ניקח לדוגמה
משחק בגודל
$2 \times 2$,
נתאר את הלוח במצבו התחלתי כמטריצה
\[\begin{bmatrix}
0 & 0 \\
0 & 0 
\end{bmatrix}\]
נתאר לחיצה על משבצת 
$(1,1)$:
\[ 
    \begin{bmatrix}
    0 & 0 \\
    0 & 0 
    \end{bmatrix} \stackrel{a_{1,1}}{\longrightarrow}
    \begin{bmatrix}
    1 & 1 \\
    1 & 0 
    \end{bmatrix}
 \]
 כפי שתיארנו 
 בהערה 
 \ref{comm: sum as press operator on board}
 אפשר לתאר שינוי מצב הנורה על ידי חיבור 
 מצבה
 עם אחד.
\[
    \begin{bmatrix}
    0 & 0 \\
    0 & 0 
    \end{bmatrix} + 
    \begin{bmatrix}
    1 & 1 \\
    1 & 0 
    \end{bmatrix}=
    \begin{bmatrix}
    1 & 1 \\
    1 & 0 
    \end{bmatrix} 
\]  
אם נציג כל מטריצה ע"י וקטור קואורדינטות
בבסיס סטנדרטי של מרחב מטריצות
אז, נוכל לרשום את השוויון הנ"ל גם כך:
 \[ 
    \begin{bmatrix} 
    0 \\ 0 \\ 0 \\ 0
    \end{bmatrix} +  \begin{bmatrix} 
    1 \\ 1 \\ 1 \\ 0
    \end{bmatrix} =  \begin{bmatrix} 
    1 \\ 1 \\ 1 \\ 0
    \end{bmatrix}  
 \]
וקטור המתאר הלחיצה
על משבצת מסוימת יקרא וקטור שינוי שלה.
 \begin{definition}
    \label{def:chang-vector}
    תהי 
    משחק על גרף בעל
    $n$
    צמתים
    הממוספרים מ
    $1$
    עד
    $n$,
    וקטור שינוי
    $\vec{t_i}$
    של צומת  
    $i$
    הוא:
    \begin{itemize}
        \item 
            וקטור 
            השייך 
            $\Zn$.
        \item 
            וקטור שתוצאת החיבור עם וקטור לוח 
            הוא וקטור לוח לאחר לחיצה על 
            $i$.
    \end{itemize}
\end{definition}
כדי לבנות וקטור שינו 
$\vec{t_i}$:
\begin{itemize}
    \item 
    ערכי הוקטור שיקבלו ערך
    $1$
    היו באינדקסים 
    של הצומת 
    ושכנותיה
    \item 
    שאר הערכי וקטור 
    היו 
    $0$.
\end{itemize}
\begin{definition}
    \label{def:board-vector}
    וקטור המתאר את מצב הלוח יקרא וקטור הלוח.
\end{definition}
\begin{comm}
    \label{ comm: indexing board game}
    שיטת המספור בפרויקט 
    היא מעבר 
    על שורות ואז על עמודות כמו שמתואר באיור
    \ref{fig:numbering_board_2x2}.
\end{comm}
\begin{figure}[ht]
    \caption{שיטת מספור משבצות על לוח}
    \label{fig:numbering_board_2x2}
    % \unsethebrew
    \centering
    \includegraphics[width=0.3\textwidth,keepaspectratio]{images/2x3_board.PNG}
\end{figure}

\begin{example}
    תהי גרף בעל 
    $4$
    צמתים,
    כפי שמתואר באיור
    \ref{fig: change vector on graph}.
    צמתים שמצבם 
    $1$
    יצבעו באדום,
    בכחול 
    יצבעו צמתים שמצבם 
    $0$.
    נדגים צירוף לחיצות במשחק 
    בעזרת וקטורי השינויים ווקטור הלוח.


    באיור
    \ref{fig:start graph presses}
    מתואר גרף במצבו הנוכחי.
    נראה את שינוי הגרף לאחר לחיצה על הצמתים 
    $1, 3$.
 
    וקטור שינוי של צומת 
    $1$:
    \[
        \vec{t_1} = 
        \begin{bmatrix}
            1 \\
            0 \\
            1 \\
            1 \\
        \end{bmatrix}
    \]
    נשרשר את וקטורי השינוי של שתי הלחיצות:
    \[
        \vec{t_1} + \vec{t_3} = 
        \begin{bmatrix}
            1 \\
            0 \\
            1 \\
            1 \\
        \end{bmatrix}
        +
        \begin{bmatrix}
            1 \\
            1 \\
            1 \\
            1 \\
        \end{bmatrix}
        =
        \begin{bmatrix}
            0 \\
            1 \\
            0 \\
            0 \\
        \end{bmatrix}
    \]
    אם נחבר וקטור זה עם וקטור הלוח שנסמן ב
    $\vec{S_0}$
    נקבל:
    \[
        \vec{S_0} + \vec{t_1} + \vec{t_3} = 
        \begin{bmatrix}
            1 \\
            0 \\
            0 \\
            0 \\
        \end{bmatrix}
        +
        \begin{bmatrix}
            0 \\
            1 \\
            0 \\
            0 \\
        \end{bmatrix}
        =
        \begin{bmatrix}
            1 \\
            1 \\
            0 \\
            0 \\
        \end{bmatrix}
    \]
    וקטור הלוח שמתקבל לאחר חיבור אכן תואם לתוצאה המצופה,
    כפי שמתואר באיור 
    \ref{fig:start graph presses solution}.
\end{example}
\begin{figure}[ht]
    \caption{
        דוגמה לתיאור וקטור שינוי במהלך משחק על גרף
        }
    \label{fig: change vector on graph}
    \centering
    \begin{subfigure}[b]{.4\linewidth}
        \caption{מצב של הגרף לפני לחיצה}
        \label{fig:start graph presses}
        % \unsethebrew
        \centering
        \includegraphics[width=.7\textwidth,keepaspectratio]{images/graph_presses.png}
    \end{subfigure}
    \begin{subfigure}[b]{.4\linewidth}
        \caption{מצב של הגרף לאחר הלחיצות}
        \label{fig:start graph presses solution}
        % \unsethebrew
        \centering
        \includegraphics[width=.7\textwidth,keepaspectratio]{images/graph_presses_solve.png}
    \end{subfigure}
\end{figure}

\begin{comm}
    היות ווקטור שינוי שייך לשדה
    $\Zn$,
    ניתן לתאר צירוף לחיצות במשחק 
    בעזרת צירוף לינארי 
    בשדה 
    $\Zn$.
    כפי שתיארנו במסקנה 
    \ref{corollary:gamplay-desc-single-press-key}
    סקלרים בצירוף לינארי זה הם
    $0$
    או 
    $1$.
\end{comm}
\begin{comm}
    מכיוון שכל משחק מתחיל 
    כאשר מצב כל הצמתים הינו 
    $0$,
    ניתן 
    להשמיט
    את וקטור הלוח 
    ההתחלתי.
\end{comm}

כאשר
נסמן מצב הלוח ההתחלתי 
ב
$S_0$
,
מתקיים:
\begin{equation}
    \label{eq: sum change vectors}
    \vec{S_0} + \sumi{j} \vec{t_j} x_j=  \sumi{j}  \vec{t_j}x_j
\end{equation}
בעקבות כך ניתן לתאר את בעיית המשחק בצורה הבאה:
\begin{equation}
    \label{eq: lin eq for solving problem}
    \sumi{j} \vec{t_j} x_j = \vec{1}
\end{equation}
כאשר
$\vec{1}$
מתאר 
את וקטור הלוח כאשר המשחק פתור.
$n$
מתאר
את
מספר הצמתים בגרף.
נשים לב 
שאם 
ידוע צירוף
$x = \begin{bmatrix}
    x_1, & x_2, & \cdots , x_n
\end{bmatrix}$
שמקיים את המשוואה 
\ref{eq: lin eq for solving problem}
אז הוא פתרון של משחק על גרף.
כדי להגיע לפתרון על גרף נלחץ על הצמתים שמספורם 
שווה 
לאינדקסים 
$j$
שמקיימים
$x_j = 1$
בצירוף 
$x$.

מערכת משוואות 
שמתוארת בנוסחה
\ref{eq: lin eq for solving problem}
אפשר לתאר
בעזרת מטריצה כמו שמתואר 
בנוסחה 
\ref{eq: matrix eq for solving problem}.
\begin{equation*}
    \begin{bmatrix}
        \vec{t_1} & \vec{t_2} & \cdots & \vec{t_n}
    \end{bmatrix}
    \begin{bmatrix}
        x_1 \\
        x_2 \\
        \cdots \\
        x_n \\
    \end{bmatrix}
    =
    \begin{bmatrix}
        1 \\
        1 \\
        \cdots \\
        1 \\
    \end{bmatrix}
\end{equation*}
\begin{equation}
    \label{eq: matrix eq for solving problem}
    \begin{bmatrix}
        t_{1,1} & t_{1,2} & \cdots & t_{1,n} \\
        t_{2,1} & t_{2,2} & \cdots & t_{2,n} \\
        \cdots & \cdots & \cdots & \cdots\\
        t_{i,j} & t_{i,2} & \cdots & t_{i,n} \\
        \cdots & \cdots & \cdots & \cdots\\
        t_{n,1} & t_{n,2} & \cdots & t_{n,n} \\
    \end{bmatrix}
    \begin{bmatrix}
        x_1 \\
        x_2 \\
        \cdots \\
        x_i \\
        \cdots \\
        x_n \\
    \end{bmatrix}
    = 
    \begin{bmatrix}
        1 \\
        1 \\
        \cdots \\
        1 \\
        \cdots \\
        1 \\
    \end{bmatrix}
\end{equation}
נשים לב שלמטריצה
במשוואה
\ref{eq: matrix eq for solving problem},
נסמנה 
ב 
$A$,
ערכי המטריצה 
שמקיימים
$A_{i,j} = 1$
הם 
באינדקסים 
$i, j$,
בהם 
צמתים
$n_i, n_j$
שהם שכנים או זהים
(
$i = j$
).
\begin{comm}
    נשים לב שהמטריצה 
    במשוואה 
    \ref{eq: matrix eq for solving problem}
    כמעט זהה למטריצת שכנויות של הגרף 
    שהגדרנו בהגדרה 
    \ref{def:graphs-neighbor-matrix}.
    ההבדל היחיד הוא שהאלכסון הראשי במטריצה
    שבמשוואה 
    \ref{eq: matrix eq for solving problem}
    מורכב כולו מערך 
    $1$.
    במידה והינו מגדירים את הגרף
    כך שכל צומת הינה שכנה לעצמה, נקבל זהות בין מטריצת
    שכנויות של הגרף למטריצה במשוואה  
    \ref{eq: matrix eq for solving problem}.
\end{comm}
\begin{definition}
    \label{def: neighbor matrix}
    מטריצה 
    שקבלנו במשוואה
    \ref{eq: matrix eq for solving problem}
    תקראה מטריצת שכנויות של משחק.
\end{definition}
\begin{comm}
    \label{comm: symetic matrix}
    היות ובגרף יחס שכנות הוא סימטרי מטריצה שכנות היא גם סימטרית.
\end{comm}
\begin{example}
    מטריצה שכנות עבור גרף באיור 
\ref{fig: change vector on graph}:
\[
    \begin{bmatrix}
        1 & 0 & 1 & 1\\
        0 & 0 & 1 & 0\\
        1 & 1 & 1 & 1\\
        1 & 0 & 1 & 1\\
    \end{bmatrix}
\]
\end{example}
\begin{definition}
    \label{ def: solution vector}
    וקטור פתרון של משחק 
    הוא וקטור
    $\vec{x}$
    שניראה
    במשוואה 
    \ref{eq: matrix eq for solving problem}.
\end{definition}
נזכיר שאם
$\vec{x}$
וקטור פתרון של המערכת 
ו
$x_i = 1$
אז כדי לפתור משחק
צריך ללחוץ על לחצן 
$i$.
בנוסף 
נציין שאתכן קיימים כמה פתרונות אפשריים.
\begin{definition}
    \label{def: standard solution}
    שיטת פתרון הנעזרת ביצירת מטריצה שכנויות 
    ומציאת וקטור פתרון
    תקראה
    אלגוריתם מבוסס מטריצת שכנויות.
\end{definition}
לפי מה שידוע לנו
השיטה שקראנו לה בפרויקט שיטת מטריצת השכנויות 
לראשונה הופיעה במאמר של 
\textenglish{K. Sutner}
\cite{B2}.
נציין שבמאמר של 
\textenglish{K. Sutner}
לא רק הוצגה שיטת זו אלה גם 
ניתנה הוכחה לקיום 
פתרון.
מרגע שהצלחנו לתאר את הבעיה
בצורה 
משוואות לינארית
על שדה
$\Zn$,
נוכל להיעזר בכלים של אלגברה לינארית
כדי למצוא פתרון,
כמו מציאת פתרון בעזרת דירוג
או
מציאת מטריצה פסאודו הפוכה וכולי. 
\begin{comm}
    \label{comm: for board too many variables}
    עבור משחק על לוח 
    $m \times n$
    גודל מערכת המשוואות המתקבל משיטה 
    מבוססת מטריצת שכנויות 
    הוא 
    $m \cdot n$
    משתנים ומשוואות.
\end{comm}
עבור לוח 
$[ m \times n ]$
מטריצת השכנות בגודל 
$[ m \cdot n \times m \cdot n ]$.
השאלה שנרצה לענות בפרק הבאה
היא:
האם קיימות שיטות לפתור את המשחק,
בעזרת מערכת המשוואות
יותר מצומצמת?

\subsection{אלגוריתם שמבוסס על מילוי עקבי של שורות}
בפרק 
\ref{subsec:neighborhood-matrix-alg}
תיארנו איך מתקבלת מערכת משוואות לינאריות מעל שדה
$\mathbb{Z}_2$.
מטריצה של מערכת הזאת היא מטריצת שכנויות.
עכשיו נראה איך אפשר להגיע לאותה מערכת משוואות
על בסיס של שיקולים שונים .נראה גם שבמקום לפתור
את המערכת הזאת ניתן לפתור מערכת הרבה יותר קטנה. 
השיטה שנציג מבוססת על
המאמר 
\cite{B1}.
לגישה החדשה ניקרא
"אלגוריתם שמבוסס על מילוי עקבי של שרות"
או בקצרה מילוי עקבי.

ללא מגבלת הכלליות נסביר את הגישה החדשה עבור לוח משבצות 
$3\times 3$.
נשייך לכל משבצת שלו משתנה באופן הבא.
\[ \begin{array}{|c|c|c|}
\hline
x_1 & x_2  & x_3  \\
\hline 
x_4 & x_5 & x_6 \\
\hline 
x_7 & x_8 & x_9 \\
\hline
\end{array}  \]
כל משתנה מסמן האם משבצת שלו
 נלחצה מספר זוגי או מספר אי-זוגי של פעמים כאשר עברנו ממצב
 הלוח בו כל המשבצות כבויות למצב בו כל המשבצות דלוקות. אז 
$x_i=1$
כאשר משבצת הזאת נלחצה מספר אי-זוגי של פעמים ו-
$x_i=0$
כאשר משבצת הזאת נלחצה מספר זוגי של פעמים. נציין שמשבצת מסוימת תהיה דלוקה אחרי סדרת לחיצות אם סכום לחיצות עליה ושכנות שלה הוא מספר אי-זוגי. כאשר ננסח את התנאי הזה עבור כל משבצת נקבל מערכת משוואות מעל שדה 
$\mathbb{Z}_2$.
ממה שכתבנו קודם נובע שמטריצת מקדמים שלה היא מטריצת שכנויות.
\begin{figure}[ht]
    \caption{מטריצת השכנויות עבור לוח 
    $3 \times 3 $}
    \label{fig:neighborhood-matrix-for-3x3}
    \[
    \begin{bmatrix}
    1 & 1 & 0 & 1 & 0 & 0 & 0 & 0 & 0 \\
    1 & 1 & 1 & 0 & 1 & 0 & 0 & 0 & 0 \\
    0 & 1 & 1 & 0 & 0 & 1 & 0 & 0 & 0 \\
    1 & 0 & 0 & 1 & 1 & 0 & 1 & 0 & 0 \\
    0 & 1 & 0 & 1 & 1 & 1 & 0 & 1 & 0 \\
    0 & 0 & 1 & 0 & 1 & 1 & 0 & 0 & 1 \\
    0 & 0 & 0 & 1 & 0 & 0 & 1 & 1 & 0 \\
    0 & 0 & 0 & 0 & 1 & 0 & 1 & 1 & 1 \\
    0 & 0 & 0 & 0 & 0 & 1 & 0 & 1 & 1 
    \end{bmatrix}
    \]
\end{figure}

נדגים עבור משבצת עם משתנה 
$x_1$. 
על מנת שהיא תהיה דלוקה אחרי סדרת לחיצות סכום לחיצות עליה ועל שכנותיה חייב להיות אי-זוגי, כלומר, בשדה 
$\mathbb{Z}_2$
מתקיים השוויון
\[ x_1+x_2+x_4=1 \]
עבור משבצת 
$x_2$
מתקבל השוויון
\[ x_1+x_2+x_3+x_5=1 \]
עכשיו נראה איך ניתן במקום מערכת עם מטריצת שכנויות שעבור לוח 
$3\times 3$
לבנות מערכת הרבה יותר קטנה.
מערכת המשוואות שנקבל תהיה מבוססת על שלושת המשתנים של משבצות בשורה הראשונה
$x_1, x_2, x_3$.

לשם כך נחלץ את 
$x_4$
ממשוואה ראשונה:
\[x_4=1+x_1+x_2\]
נחלץ 
$x_5$
ממשוואה שנייה:
\[x_5=1+x_1+x_2+x_3\]
נחלץ את 
$x_6$
ממשוואה שלישית
ונקבל:
\[x_6=1+x_2+x_3\]
נחלץ את 
$x_7$
ממשוואה רביעית,
כאשר
נעזר בערכי המשתנים שכבר חולצו:
\[x_1 + x_4 + x_5 + x_7 = 1 \Rightarrow 
x_1  + ( 1+x_1+x_3 ) + ( 1+x_1+x_2+x_3 ) +  x_7=1
\] 
לכן 
מתקבל:
\[x_7=1+x_3\]
נחלץ את 
$x_8$
ממשוואה חמישית:
\[x_8=0\]
נחלץ את 
$x_9$
ממשוואה שישית:
נקבל:
\[x_9=1 + x_1 + x_3\]

היות וחילצנו את כל המשתנים פרט למשתנים 
$x_1, x_2, x_3$
נפשט את המשוואות הנותרות ונקבל
מערכת של 
$3$
משוואות עם שלושה משתנים.
\\
פישוט משוואה 
שביעית:
\[x_1+x_2+x_3 = 1\]
פישוט משוואה 
שמינית:
\[x_2+x_3 = 0\]
פישוט משוואה 
תשיעית:
\[x_1+x_2=1\]
למערכת המשוואות 
יש פתרון יחיד והוא 
$x_1=1, x_2=0, x_3=1$
.
\\
מפה נובע ש
$x_4 =0, x_5 =1, x_6 =0, x_7 =1, x_8 =0, x_9 =1$.

נבחין 
שכל הפעולות שנעשו בגישה מילוי עקבי הם פעולות אלמנטריות.
לכן מימוש השיטה בקוד נעשה ע"י שימוש בפעולות אלמנטריות של גאוס
אבל סדר של פעולות האלה שונה מסדר של פעולות אלמנטריות בשיטת הדירוג גאוס.
סדר פעולות היה לפי סדר חילוץ המשתנים שהצגנו בגישה מילוי עקבי.
נציג את סדר פעולות הדירוג על אותה דוגמה, על לוח 
$3 \times 3$.
נציין שפעולות הדירוג כמובן מתבצעות על מטריצת המורחבת כלומר מטריצת השכנויות 
עם וקטור הלוח הפתור
$\vec 1$.

כאשר תיארנו את האלגוריתם מילוי עיקבי
עבור שלושת המשוואות הראשונות רק חילצנו את המשתנים
ולכן
עבור שלושת השורות הראשונות במטריצה לא נבצע אף פעולה אלמנטרית.

עבור משוואה רביעית הצבנו 
את המשתנים המחולצים של 
$x_4, x_5$,
לכן עבור משוואה רביעית ננסה להיפטר ממשתנים עלו בעזרת פעולות שורות:
\begin{align*} 
r_4 \leftarrow r_4 + r_1\\
r_4 \leftarrow r_4 + r_2
\end{align*} 
עבור משוואה חמישית הצבנו 
את המשתנים המחולצים של 
$x_4, x_5, x_6$,
לכן עבור משוואה חמישית ננסה להיפטר ממשתנים עלו בעזרת פעולות שורות:
\begin{align*} 
    r_5 \leftarrow r_5 + r_1 \\
    r_5 \leftarrow r_5 + r_2 \\
    r_5 \leftarrow r_5 + r_3
\end{align*} 
עבור משוואה שישית הצבנו 
את המשתנים המחולצים של 
$x_5, x_6$,
לכן עבור משוואה שישית ננסה להיפטר ממשתנים עלו בעזרת פעולות שורות:
\begin{align*} 
    r_6 \leftarrow r_6 + r_2 \\
    r_6 \leftarrow r_6 + r_3
\end{align*}
עבור משוואה שביעית הצבנו 
את המשתנים המחולצים של 
$x_7, x_8$,
לכן עבור משוואה שביעית ננסה להיפטר ממשתנים עלו בעזרת פעולות שורות:
\begin{align*} 
    r_7 \leftarrow r_7 + r_4 \\
    r_7 \leftarrow r_7 + r_5 \\
\end{align*} 
עבור משוואה שמינית הצבנו 
את המשתנים המחולצים של 
$x_7, x_8, x_9$,
לכן עבור משוואה שמינית ננסה להיפטר ממשתנים עלו בעזרת פעולות שורות:
\begin{align*} 
    r_8 \leftarrow r_8 + r_4 \\
    r_8 \leftarrow r_8 + r_5 \\
    r_8 \leftarrow r_8 + r_6
\end{align*} 
עבור משוואה תשיעית הצבנו 
את המשתנים המחולצים של 
$x_7, x_8$,
לכן עבור משוואה תשיעית ננסה להיפטר ממשתנים עלו בעזרת פעולות שורות:
\begin{align*} 
    r_9 \leftarrow r_9 + r_5 \\
    r_9 \leftarrow r_9 + r_6
\end{align*}
לאחר פעולות דירוג 
מערכת המשוואות המתקבלת בשורות 
שבע שמונה ותשעה היא:
\begin{align*} 
    x_1 + x_2 + x_3 &= 1\\
    x_2 + x_3 &= 0 \\
    x_1 + x_2 &= 1
\end{align*}

\subsection{השוואה בין שתי השיטות למציאת פתרון}
חישוב סיבוכיות
של דירוג מטריצה 
כללית
בגודל 
$n^2 \times n^2$
הוא 
$O(n^2 \cdot n^4) = O(n^6)$.

דירוג שורה בשיטת מילוי עקבי 
מבצעים פעולות שורות כמספר השכנים עבור אותה משוואה.
לכן יש לכל יותר
$4$
פעולות שורות שצריך לבצע
כדי לקבל מערכת משוואות מצומצמת.
מחישוב הסיבוכיות 
פעולה  זה תיקח
\\
$O(n^2 \cdot n^2) = O(n^4)$
.
דירוג
$n$
המשתנים  
הנותרים
הוא בסיבוכיות 
$O(n \cdot n^2) = O (n^3)$.

נראה את הסיבוכיות בפועל על ידי הצגת זמני חישוב.
באיור 
\ref{fig:prefofmance_diagram}
אפשר לראות את הביצועים
של שני האלגוריתמים, ציר 
ה
$x$
מתאר
גודל שורה של לוח ריבועי.
ציר ה
$y$
מתאר
זמן 
בשניות
שלוקח לאלגוריתם לרוץ.
לפי התוצאות של איור 
\ref{fig:prefofmance_diagram}
ניראה 
ששיטה למילוי עקבי שבתאוריה יותר אופטימליות לוקחת יותר זמן.
אחת הסיבות לקח 
שפונקציה שפותרת מערכת משוואות הינה פונקציית ספרייה,
היודע כאופטימלי.

\begin{figure}[ht]
    \caption{ 
    גרף מתאר ביצועים על לוח ריבועי גודל שורה מול זמן
    }
    \label{fig:prefofmance_diagram}
    % \unsethebrew
    \centering
    \includegraphics{images/benchmark.png}
\end{figure}

\subsection{דיון לגבי משחק על גרף}
תיארנו את המשחק על גרף 
מסיבות הבאות:
\begin{enumerate}
    \item 
    ככול שהמבנה כללי יותר התאוריה שמפתחים מתאימה ליותר בעיות.
    \item 
    תאוריית הגרפים רחבה מאד וקל לתאר בעזרתה בעיות.
    \item 
    מבליט את מהות הבעיה והגדרה הבסיסית ביותר של המשחק.
\end{enumerate}
בפועל כשהצגנו את האלגוריתמים לפתרון משחק 
התגלתה התמונה המלאה.
כלומר
שני האלגוריתמים שתיארנו מתארים את המשחק כגרף,
היות ושני האלגוריתמים בנויים על מטריצת השכנויות,
מטריצת שכנויות היא שיטת ייצוג קלאסי לגרפים.
קשר זה מדגיש ומראה שלפעמים רק תיאור מדויק של הבעיה מספיק כדי למצוא לבעיה פתרון.

\section{קיום פתרון ומספר הפתרונות עבור משחק על גרף}
עד כה הצגנו שיטות למציאת פתרון,
שיטות אלו האירו את העובדה
ששאלת קיום הפתרון למשחק על גרף שקולה לשאלת קיום הפתרון למערכת
משוואות לינאריות.
בפרק זה נרצה להוכיח קיום פתרון למשחק לכל גרף.
העובדה שקיים פתרון לכל כל גרף אינה מובנת מעליה.
אחד המקומות ששאלה זה נשאלה היא בספר 
\cite{B3},
בעבודתנו נראה הוכחה קצת שונה בעזרת הכלים שפיתחנו.
אומנם הוכחה קיום פתרון הופיע לראשונה במאמר 
\cite{Sutner}.
עובדה מעניינת נוספת שהוצגה במאמר היא,
שיש רק הוכחה שמבוססת על אלגברה לינארית
לשאלת קיום פתרון.

\subsection{הוכחת קיום פתרון על גרף}
\begin{definition}
    תהי 
    $\mathbb{S}$
    קבוצה,
    פעולה בינארית על 
    $\mathbb{S}$
    היא פונקציה
    $\mathbb{S} \times \mathbb{S} \rightarrow \mathbb{S}$
    המתאימה לכל זוג 
    סדור.
    פעולה בינארית 
    עבור הזוג
    $(s_1, s_2)$
    תסומן
    $\langle s_1, s_2 \rangle$.
\end{definition}
\begin{definition}
    \label{def:inner_mul}
    לכל שני וקטורים
    $\vec x, \vec y \in \Zn$
    נגדיר פעולה הבאה:
    \begin{equation}
        \vec x \cdot \vec y = 
        \begin{bmatrix}
            x_1 \\
            x_2 \\
            \cdots \\
            x_n \\
        \end{bmatrix}
        \cdot 
        \begin{bmatrix}
            y_1 \\
            y_2 \\
            \cdots \\
            y_n \\
        \end{bmatrix}
        = 
        x_1 y_1 + x_2 y_2 + \cdots x_n y_n
    \end{equation}
    לפעולה זה
    בין שני וקטורים ב
    $\Zn$
    ניקרא מכפלה סקלרית. 
\end{definition}
\begin{comm}
    \label{comm:not_really_inner_mul}
    פעולה שהגדרנו 
    בהגדרה 
    \ref{def:inner_mul}
    נקראת 
    מכפלה סקלרית
    למרות שהיא
    מקיימת רק 
    $3$
    מתוך 
    $4$
    תכונות של מכפלה סקלרית ב
    -
    $R^n$.   
    תכונה 
    $<\vec{u},\vec{u}> = 0 \Leftrightarrow \vec{u} = \vec{0} $
    לא מתקיימת.
\end{comm}
\begin{example}
    המחשה להערה
\ref{comm:not_really_inner_mul}:
\[
    \begin{bmatrix}
    1 \\
    1 \\
    \end{bmatrix}    
    \cdot 
    \begin{bmatrix}
    1 \\
    1 \\
    \end{bmatrix} 
    = 1 + 1 = 0
\]
\end{example}

\begin{comm}
    וקטורים 
    $\vec x, \vec y \in \Zn $
    יקראו מאונכים אחד לשני
    אם,
    תוצאת מכפלה הסקלרית ביניהם שווה
    ל
    $0$
    כלומר,
    $\vec{x} \cdot \vec{y} = 0$.
    וקטורים מאונכים זה לזה יסומנו ב
    $\vec x \perp \vec y$.
\end{comm}
\begin{theorem}
    \label{the: Nul A and Col AT}
    תהי מטריצה 
    $A \in {\mathbb{Z}_2}^{m \times n }$
    אז 
    $\Col A^T \perp \Nul A$
    ו
    $\Col A \perp \Nul A^T$
\end{theorem}
\begin{proof}
    תהי 
    מטריצה
    $A \in \mathbb{Z}_2^{m \times n}$
    ניקח 
    $\vec x \in \mathrm{Nul} A$.
    לכן
    $A\vec x=\vec 0$. 
    אז,
    \[
        \vec x \perp \mathrm{Row}A=\mathrm{Col} A^T
    \]
\end{proof}
\begin{comm}
    \label{comm:not-all-A-ColA-intersection-NulA-empty}
    עבור 
    המכפלה הסקלרית שהגדרנו
    על השדה הוקטורי 
    $\Zn$
    לא לכל מטריצה 
    $A$
    מתקיים:
    \[\Col A \cap \Nul A^T = \{ \vec{0}\}\]
\end{comm}
\begin{example}
    המחשב להערה 
    \ref{comm:not-all-A-ColA-intersection-NulA-empty}:
    
    עבור מטריצה:
    \[A = 
    \begin{bmatrix}
        1 & 1 \\
        1 & 1 \\
    \end{bmatrix}\]
    מתקיים:
    \[
    \begin{bmatrix}
        1 \\
        1 \\
    \end{bmatrix}
    \in \Col A \cap \Nul A^T \]
\end{example}
\begin{theorem}
    \label{thrm: clean game has solution}
    לכל משחק על גרף קיים פתרון.
\end{theorem}
\begin{proof}
    תהי 
    $A \in {Z_2}^{n \times n}$
    מטריצת השכנויות 
    של משחק
    שהגדרנו
    ב
    \ref{def: standard solution}.
    למטריצה זו מתקיימים תכונות הבאות:
    \begin{enumerate}
        \item 
        מטריצה סימטרית לפי הערה
        \ref{comm: symetic matrix}
        \item 
        האיברים על האלכסון
        מטריצה 
        ערכם שווה ל
        $1$.
    \end{enumerate}

    כדי להראות שלמשחק יש פתרון 
    צריך להראות שקיים פתרון למערכת:
    \[A \vec{x} = \vec{1} \]
    במקרה ש 
    $A$
    מטריצה הפיכה קיים פתרון, ופתרון יחיד.
    עבור המקרה שמטריצה אינה הפיכה 
    כלומר,
    \\
    $\Nul A \neq \{ \vec{0}\}$.
    תהי 
    $\vec{x} \in \Nul A$
    מהגדרה זו מתקיים
    $A\vec{x} = \vec{0}$
    לכן:
    \[\vec{x}^T A \vec{x} = \vec{x}^T\vec{0} = 0\]
    נסמן 
    $\vec{x} = [x_1, x_2, \cdots, x_n]^T$
    \begin{align}
        \label{eq: quadratic form}
            \vec{x}^T A \vec{x} &= a_{1,1}x_1^2 + 2(a_{1,2} + a_{2,1})x_1x_2 + \cdots + 2(a_{1,n} + a_{n,1})x_1x_n +  \\
            \nonumber &+ a_{2,2}x_2^2 +  2(a_{2,3} + a_{3,2})x_2x_3 + \cdots  + 2(a_{2,n} + a_{n,2})x_2x_n + \cdots 
    \end{align}
    היות ומטריצה סימטריות
    $a_{i,j} = a_{j,i}$
    לכן
    מתקבל:
    \[a_{i,j} - a_{j,i} = a_{i,j} + a_{j,i} = 0 \]
    לכן
    את המשוואה 
    \ref{eq: quadratic form}
    אפשר לפשט כך:
    \[ \vec{x}^T A \vec{x} = a_{1,1}x_1^2 + a_{2,2} x_2^2 + \ldots +  a_{n,n} x_n^2\]
    היות ומתקיים
    $x_i^2 = x_i$
    כי
    $x_i \in \mathbb{Z}_2$
    $i \in 1, \cdots ,n$
    לכן, ניתן לפשט את משוואה 
    \ref{eq: quadratic form}:
    \[ \vec{x}^T A \vec{x} = a_{1,1}x_1 + a_{2,2} x_2 + \ldots + a_{n,n} x_n\]
    היות ו
    $ \vec{x}^T A \vec{x} = 0$
    לכן מתקיים:
    \[a_{1,1}x_1 + a_{2,2} x_2 + \ldots + a_{n,n} x_n = 0\]
    כלומר 
    $\vec{1} \perp  \vec{x}$
    כאשר 
    $x \in \Nul A$
    לפי משפט 
    \ref{the: Nul A and Col AT}
    מתקבל 
    $\vec{1} \in \Col A^T$.
    מטריצה
    $A$
    הינה
    סימטרית 
    לכן
    $A^T = A$
    ומתקיים
    $\vec{1} \in \Col A$.
    למעשה הוכנו 
    שקיים 
    $\vec x$
    שמקיים פתרון למערכת
    $A\vec{x} = \vec{1}$
    כלומר, קיים פתרון למשחק.
\end{proof}
הוכחת קיום הפתרון עבור המשחק כפי שהגדרנו  על גרף הושגה,
מסקנה נאיבית שניתן אולי לחשוב היא,
שלכל מצב התחלתי
אפשרי היה לפתור את המשחק. בחלק זה של הפרק ננסה לחדד מתי קיים פתרון כאשר
מצבים התחלתיים וסופיים של אותו משחק שונים מהמשחק המקורי.
\begin{definition}
    \label{def:diff-game}
    משחק אחר שאפשר להציע הוא משחק האורות כללי יותר מוגדר כך:
    לוח הבקרה נשאר זהה למשחק המקורי כלומר, שינוי נורות 
    לאחר לחיצה מתנהג נשאר כפי שהוגדר במשחק המקורי.
    הבדל בין משחק החדש למקורי:
    מצב התחלתי הוא שחלק מנורות דולקות וחלק כבויות
    ורוצים להגיע למצב סופי שגם בו חלק מנורות דולקות וחלק כבויות.
\end{definition}
\begin{comm}
    רק בפרק זה נשתמש במשחק כפי שהגדרה 
    בהגדרה 
    \ref{def:diff-game}.
    בכל שאר פרקים נשתמש בהגדרה המקורית של המשחק.
\end{comm}
עבור המשחק שהגדרנו 
\ref{def:diff-game}
אותו קורא נאיבי יכול להניח שגם עבור משחק שכזה תמיד קיים פתרון.
\begin{example}
    דוגמה למשחק על לוח 
    לפי 
    הגדרה 
    \ref{def:diff-game},
    שאין לו פתרון.
    תהי לוח 
    $2 \times 1$
    בו מצב התחלתי הוא שהנורה הימנית ביותר דלוקה ונרצה לעבור למצב הסופי בו כל 
    הנורות דולקות.
    נראה 
    שהמשחק אינו פתיר
    לפי 
    הצגת כל הלוחות האפשריים 
    להתקבל
    במשחק על ידי 
    כל
    הצירופים השונים של לחיצות על הלוח.
    אם נמספר את המשבצות לפי שיטת המספור שציינו בהערה 
    \ref{ comm: indexing board game},
    אז אוסף כל צירופי הלחיצות הם:
    \[
        (), (1), (2), (1,2)
    \]
    כפי שניתן לראות 
    באיור 
    \ref{fig:no-sol-example-2x1}
    באף צירוף לחיצות לא ניתן להגיע למצב הסופי שהוגדר במשחק.
\end{example}

\begin{figure}[ht]
    \caption{מצבי הלוחות לאחר לחיצה של צירוף}
    \label{fig:no-sol-example-2x1}
    \centering
    \begin{subfigure}{.20\textwidth}
        \caption{
            עבור צירוף
            $()$
        }
        \[
            \begin{bmatrix}
                0 & 1
            \end{bmatrix}
        \]
    \end{subfigure}
    \begin{subfigure}{.20\textwidth}
        \caption{
            עבור צירוף
            $(1)$
        }
        \[
            \begin{bmatrix}
                1 & 0
            \end{bmatrix}
        \]
    \end{subfigure}
    \begin{subfigure}{.20\textwidth}
        \caption{
            עבור צירוף
            $(2)$
        }
        \[
            \begin{bmatrix}
                1 & 0
            \end{bmatrix}
        \]
    \end{subfigure}
    \begin{subfigure}{.20\textwidth}
        \caption{
            עבור צירוף
            $(1, 2)$
        }
        \[
            \begin{bmatrix}
                0 & 1
            \end{bmatrix}
        \]
    \end{subfigure}%
\end{figure}

כדי לבדוק אם קיים פתרון למשחק הכללי שהגדרנו 
בהגדרה 
\ref{def:diff-game}
נוכל להיעזר בהוכחה
\ref{thrm: clean game has solution}.
\begin{theorem}
    \label{thm:exist-sol-by-ColA}
    למשחק קיים פתרון אם ורק אם 
    וקטור הפרש בין מצב סופי ומצב ההתחלתי שייך למרחב 
    העמודות של מטריצת שכנויות.
\end{theorem}
\begin{proof}
    נגדיר קודם את המשחק 
    שהגדרנו 
    בהגדרה 
    \ref{def:diff-game}
    אלגברית.
    לפי משוואה 
    \ref{eq: sum change vectors}
    אפשר לנסח אלגברית את המשחק כך.
    תהי 
    $A$
    מטריצת השכנויות,
    $\vec{S_0}$
    מצב התחלתי של המשחק,
    ו
    $\vec{S_e}$
    מצב הסופי של המשחק.
    נחפש צירוף 
    לא סדור של לחיצות 
    $\vec x$
    כך שמתקיים:
    \[
        \vec{S_0} + A\vec{x} = \vec{S_e}
    \]
    נעביר אגפים ונקבל:
    \[
         A\vec{x} = \vec{S_e} - \vec{S_0}
    \]
    הוכחה
    של משפט 
    \ref{thrm: clean game has solution}
    בנויה על עובדה שצריך להוכיח
    שווקטור 
    $\vec{1}$
    שייך ל
    $\Col A$.
    במקרה של המשחק החדש כדי להראות
    שקיים פתרון למשחק 
    מספיק להוכיח 
    ש
    $\vec{S_e} - \vec{S_0}$
    שייך ל
    $\Col A$.
\end{proof}
\begin{comm}
    כדי לבדוק שוקטור 
    $\vec v \in \mathbb{R}^{n}$
    שייך 
    ל
    $\Nul A$
    של מטריצה 
    $A \in \mathbb{R}^{m \times n}$
    מספיק להראות שמתקיים:
    \[ A \vec v = \vec 0\]
\end{comm}
\begin{comm}
    בגלל 
    הערה 
    \ref{comm:not-all-A-ColA-intersection-NulA-empty}
    לא ניתן
    לומר שוקטורים 
    $z \in \Zn$
    המקיים 
    $z \in \Col A$
    אז הוא לא שייך 
    ל 
    $\Nul A$.
    לו היה ניתן לומר זאת,
    היה קל 
    לבדוק 
    שלמשחק קיים פתרון
    על ידי בדיקה:
    \[\vec{S_e} - \vec{S_0} \notin \Nul A\]
\end{comm}
\begin{theorem}
    \label{thm:easyier-way-to-find-exist-solution}
    תהי משחק לפי 
    הגדרה 
    \ref{def:diff-game},
    $\vec{S_e}$ 
    מצב הסופי,
    $\vec{S_0}$
    התחלתי של משחק,
    ו 
    $A$
    מטריצת שכנויות.
    אם
    $\vec{S_e} - \vec{S_0} \notin \Nul A$
    אז 
    למשחק קיים פתרון.
\end{theorem}
\begin{proof}
    אם 
    $\vec{S_e} - \vec{S_0} \notin \Nul A$
    אז בהכרח 
    \[\vec{S_e} - \vec{S_0} \in \Col A^T = \Col A\]
    לפי משפט 
    \ref{thm:exist-sol-by-ColA}
    למשחק קיים פתרון.
\end{proof}
משפט 
\ref{thm:easyier-way-to-find-exist-solution}
יכול להקל על הבדיקה אם המשחק פתיר.
אך, קיימים מקרים 
שמתקיים: 
\[\vec{S_e} - \vec{S_0} \in \Nul A\]
ועדיין קיים למשחק פתרון.


\subsection{מספר הפתרונות עבור כל גרף}
הוכחנו שלכל משחק על גרף יש פתרון שסדר לחיצות
אינו משנה את התוצאה על הלוח.
השאלה  שנשאל בפרק זה מה אפשר לומר על מספר פתרונות בעזרת הכלים שהצגנו.
נציין ששני פתרונות יקראו שונים אם, קיים לפחות לחצן אחד שמבדיל בין הפתרונות.
זאת אומר שקיים לחצן ששייך לפתרון ראשון ולא שייך לפתרון שני.
כפי שציינו קודם סדר הלחיצות לא משנה את הפתרון לכן, פתרון הינו קבוצה של לחצנים
שצריכים להילחץ כדי להגיע למצב סופי של המשחק.
\begin{example}
    נרצה להראות שקיימים מספר פתרונות למשחק.
    ניקח לדוגמה משחק על גרף שמתואר באיור 
    \ref{fig: clic 3 node graph game}.
    היות וגרף הינו קליקה לכן לחיצה בודדת על אחד הצמתים תדליק את כל הלחצנים.
    מתקבל שקבוצה
    \[G = \{\{v_1\}, \{v_2\}, \{v_3\} \}\]
    היא חלק מקבוצת הפתרונות של המשחק על גרף.
    כפי שניתן לראות קיימים לפחות שלושה פתרונות למשחק הנתון.
\end{example}

\begin{figure}[ht]
    \caption{משחק על גרף}
    \label{fig: clic 3 node graph game} 
    % \unsethebrew
    \centering
    \includegraphics[width=.3\textwidth,keepaspectratio]{images/clic_graph_3_node.png}
\end{figure}

נשאל פרק זה איך אפשר למצוא את כמות הפתרונות במשחק.
\begin{definition}
    דרגת חופש
    $F(A)$
    של מטריצה 
    $A \in\mathbb{R}^{m \times n}$
    היא מספר העמודות 
    של המטריצה פחות דרגה של המטריצה.
    נתאר את דרגת החופש
    בעזרת הנוסחה הבאה:
    \[
        F(A) = n - rank(A)
    \]
\end{definition}
לאחר שהגדרנו את מושג דרגת החופש נוכל לנסח את המשפט המרכזי של הפרק.
\begin{theorem}
    \label{thm:calc-num-sol}
    מספר הפתרונות של משחק 
    שווה ל 
    $2^{k}$.
    כאשר 
    $k$
    שווה לדרגת החופש של מטריצה
    השכנויות של המשחק.
\end{theorem}
\begin{proof}
    נזכיר שאת מטריצה השכנויות הגדרנו בהגדרה
    \ref{def: neighbor matrix}.
    נסמן ב
    $A$
    את מטריצת השכנויות,
    ב
    $X$
    את כל הוקטורים שהם פתרון של המערכת:
    \[A \vec x = \vec{1}\]
    לפי משפט 
    \ref{thrm: clean game has solution}
    ידוע שקיים לפחות פתרון אחד למשחק.
    היות וידוע שיש לפחות פתרון אחד אפשר לתאר את כל פתרונות כך:
    \[X = X_n + x_0\]
    כאשר 
    $X_n$
    קבוצת כל הוקטורים השייכים לפתרון מרחב האפס 
    של מטריצה 
    $A$,
    $x_0$ 
    פתרון פרטי,  
    ו
    $X$
    קבוצת
    כל פתרונות של המשחק.
    לכן גודל קבוצת הפתרונות שווה לגודל מרחב האפס.
    ידוע שגודל מרחב האפס תלוי בדרגת החופש לכן, מספר הווקטורים בבסיס
    מרחב האפס שווה לדרגת החופש שנסמן ב
    $k$.
    כמות הווקטורים במרחב האפס שווה לכל וקטורים שמוגדרים בצירוף לינארי:
    \[x = a_1 x_1 + a_1 x_1 + a_2 x_2 + \cdots + a_k x_k\]
    כאשר הערכים של
    $a_i \in Z_2$
    לכן,
    לכל מקדם יכול להיות
    $2$
    ערכים.
    היות ווקטורים בלתי תלויים לינארית,
    קיבלנו שגודל קבוצת הפתרונות הוא בדיוק
    $2^k$.
\end{proof}
הבחנה נוספת שנציין, אפשר לחסום את כמות הפתרונות.
חסם עליון טריוויאלי לכמות המקסימלית של פתרונות הוא 
$2^n$
פתרונות כאשר
$n$
שווה למספר הלחצנים.
זאת מכיוון שלא יכול להיות יותר פתרונות מאשר כמות הלחיצות השונות האפשריות במשחק.
השאלה שנשאלת האם אפשר למצוא חסם הדוק יותר?
\begin{comm}
    עבור משחק לוח מלבני
    בגודל 
    $m \times n$
    קיים לכל יותר 
    $2^k$
    כאשר 
    $k = \min\{m,n\}$
    פתרונות שונים
\end{comm}
\begin{proof}
    הערה זה נכונה לפי אלגוריתם שמבוסס על מילוי עקבי של שורות
שהגדרנו
\ref{def: spanish way}
ניתן לתרגם את משחק ל
$k$
משוואות 
ש
$k$
יכול להיות מספר שורות או עמודות 
.
\end{proof}
לסיכום 
נציג באיור 
\ref{fig:num-sol-in-table}
את כמות הפתרונות שיש בלוח.
השורות והעמודות בטבלה מייצגות את ממדי הלוח.
טבלה זאת חושבה על ידי משפט 
\ref{thm:calc-num-sol}.

\begin{figure}
    \caption{טבלה מתארת מספר פתרונות בלוחות 
    $m \times n$
    }
    \centering
    \label{fig:num-sol-in-table}
    \begin{english}
        \begin{tabular}{ |c||c|c|c|c|c|c|c|c|c| }
            \hline
            \ & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 \\
            \hline
            \hline
            1 & 1 & 2 & 1 & 1 & 2 & 1 & 1 & 2 & 1 \\
            \hline
            2 & 2 & 1 & 4 & 1 & 2 & 1 & 4 & 1 & 2 \\
            \hline
            3 & 1 & 4 & 1 & 1 & 8 & 1 & 1 & 4 & 1 \\
            \hline
            4 & 1 & 1 & 1 & 16 & 1 & 1 & 1 & 1 & 16 \\
            \hline
            5 & 2 & 2 & 8 & 1 & 4 & 1 & 16 & 2 & 2 \\
            \hline
            6 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 64 & 1 \\
            \hline
            7 & 1 & 4 & 1 & 1 & 16 & 1 & 1 & 4 & 1 \\
            \hline
            8 & 2 & 1 & 4 & 1 & 2 & 64 & 4 & 1 & 2 \\
            \hline
            9 & 1 & 2 & 1 & 16 & 2 & 1 & 1 & 2 & 256 \\
            \hline
        \end{tabular}
    \end{english}
\end{figure}

\section{פתרון אופטימלי עבור לוחות מלבניים}
בפרק זה נציג סוג מסוים של פתרונות,
לסוג זה נקראה פתרון אופטימלי.
פתרון זה מקל רבות על המשחק 
כיוון שמצמצם את כמות הלחיצות האפשריות בכל מצב במשחק.
\begin{definition}
    \label{def: opt-sol}
    פתרון אופטימלי של משחק הינו פתרון 
    בו כל נורה משנה מצב רק פעם אחד.
    כלומר 
    השחקן פתר את המשחק כאשר 
    כל הנורות עברו ממצב התחלתי למצב הסופי פעם אחת בלבד.
\end{definition}
באיור 
\ref{fig: min sol 2x3}
ניתן דוגמא לפתרון מינמלי 
בלוח 
$2 \times 3$.
כשלוחצים על לחצנים 
$3, 4$
כל הנורות נדלקות, ואף 
אחת מהם לא נכבית באף לחיצה.

\begin{figure}[ht]
    \caption{פתרון מינמלי של משחק}
    \label{fig: min sol 2x3}
    % \unsethebrew
    \centering
    \includegraphics[width=.3\textwidth,keepaspectratio]{images/min_sol_2x3.PNG}
\end{figure}

נרצה לחדד ולהדגיש עד כמה קל למצוא פתרונות אופטימליים.
אם ניקח לוח 
$2 \times 3$
כפי שמתואר 
באיור 
\ref{fig: min sol 2x3},
ונתבונן במספר כל הפתרונות שיש ללוח זה,
כפי
שמתואר בטבלה 
\ref{fig:num-sol-in-table},
ניראה שיש 
$4$
פתרונות.
שני פתרונות אופטימליים 
ושני פתרונות לא אופטימליים,
נזמין את הקורא לחפש את כל הפתרונות.
כנראה ששני הפתרונות האופטימליים נמצאו מידית.
כנראה שכדי למצוא את הפתרונות הנותרים 
נצטרך לקחת דף ועט, ולחפש אותם גם עבור לוח בממד מצומצם שכזה.
את כל ארבעת הפתרונות נציג באיור 
\ref{fig:all-2x3-sol}.

\begin{figure}[ht]
    \caption{משחק על גרף לדוגמה}
    \label{fig:all-2x3-sol}
    \centering
    \begin{subfigure}{.20\textwidth}
        % \unsethebrew
        \centering
        \includegraphics{images/min_sol_2x3.PNG}
        % \sethebrew
    \end{subfigure}%
    \begin{subfigure}{.20\textwidth}
        % \unsethebrew
        \centering
        \includegraphics{images/2x3_2.png}
        % \sethebrew
    \end{subfigure}%
    \begin{subfigure}{.20\textwidth}
        % \unsethebrew
        \centering
        \includegraphics{images/2x3_3.png}
        % \sethebrew
    \end{subfigure}%
    \begin{subfigure}{.20\textwidth}
        % \unsethebrew
        \centering
        \includegraphics{images/2x3_4.png}
        % \sethebrew
    \end{subfigure}%
\end{figure}

נשים לב  
ניסוח של משחק האורות בו הפתרונות המתקבלים הם רק פתרון אופטימלי 
מזכיר, מאוד משחקים כמו פאזלים או טטריס.
הדימיון בין המשחקים נובע מכיוון שהמטרה במשחקים אלו היא למלאה אזור ריק במספר צורות שונות.
משחק האורות בו הפתרונות המתקבלים הם רק פתרונות אופטימליים,
נהיה למשחק 
שמנסים למלא את הלוח באמצעות לבנים בצורה שונות.
משחק שכזה זה הוא מקרה פרטי של אוסף משחקי ריצוף של אבני פוליאומינו.
פוליאומינו הוא אובייקט קומבינטורי המורכב מריבועים המחוברים זה 
לזה, על ידי הצמדת צלעות הריבועים.
במשחק האורות בו הפתרונות המתקבלים הם רק פתרונות אופטימליים,
אז
הפוליאומינו 
של המשחק הם בצורות:
\begin{figure}[ht]
    \begin{subfigure}{0.3\textwidth}
        \caption*{צורת פינה}
        \[\begin{array}{|p{0.2cm}|p{0.2cm}|p{0.2cm}|}
            \hline
            \cellcolor{ansi-green}*&\cellcolor{ansi-green} &\cellcolor{ansi-yellow}\\
            \hline
            \cellcolor{ansi-green}&\cellcolor{ansi-yellow} &\cellcolor{ansi-yellow} \\
            \hline
            \cellcolor{ansi-yellow}&\cellcolor{ansi-yellow} &\cellcolor{ansi-yellow} \\
            \hline
        \end{array}\]
    \end{subfigure}
    \begin{subfigure}{0.3\textwidth}
        \caption*{צורת שפה לא בפינה}
        \[\begin{array}{|p{0.2cm}|p{0.2cm}|p{0.2cm}|}
            \hline
            \cellcolor{ansi-green}&\cellcolor{ansi-green}* &\cellcolor{ansi-green}\\
            \hline
            \cellcolor{ansi-yellow}&\cellcolor{ansi-green} &\cellcolor{ansi-yellow} \\
            \hline
            \cellcolor{ansi-yellow}&\cellcolor{ansi-yellow} &\cellcolor{ansi-yellow} \\
            \hline
        \end{array}\]
    \end{subfigure}
    \begin{subfigure}{0.3\textwidth}
        \caption*{צורת פנימית}
        \[\begin{array}{|p{0.2cm}|p{0.2cm}|p{0.2cm}|}
            \hline
            \cellcolor{ansi-yellow}&\cellcolor{ansi-green} &\cellcolor{ansi-yellow}\\
            \hline
            \cellcolor{ansi-green}&\cellcolor{ansi-green}* &\cellcolor{ansi-green} \\
            \hline
            \cellcolor{ansi-yellow}&\cellcolor{ansi-green} &\cellcolor{ansi-yellow} \\
            \hline
        \end{array}\]
    \end{subfigure}
\end{figure}

כאשר המשבצות שנלחצו מסומנות בסימן 
$*$.

חיפוש פתרון אופטימלי על לוח נהיה שקול לשאלה: האם אפשר 
לרצף את הלוח עם 
פוליאומינו
של המשחק?
\begin{figure}
    \caption*{דוגמה לריצוף משחק
    $4 \times 4$}
    \[ \begin{array}{|c|c|c|c|}
        \hline
        \cellcolor{ansi-green}&\cellcolor{ansi-green}* &\cellcolor{ansi-green} &\cellcolor{ansi-blue} \\
        \hline
        \cellcolor{ansi-red}&\cellcolor{ansi-green} &\cellcolor{ansi-blue} &\cellcolor{ansi-blue} *\\
        \hline
        \cellcolor{ansi-red}*&\cellcolor{ansi-red} &\cellcolor{ansi-yellow} &\cellcolor{ansi-blue} \\
        \hline
        \cellcolor{ansi-red}&\cellcolor{ansi-yellow}&\cellcolor{ansi-yellow}*&\cellcolor{ansi-yellow} \\
        \hline
        \end{array} \]
\end{figure}

בפרק זה נפתור את השאלה: לאיזה לוחות קיים פתרון מינמלי
כאשר מצב התחלתי הוא שכל הנורות במצב
$0$
?

\subsection{הוכחת אי קיום לפתרון אופטימלי על לוחות ששני הממדים גדולים מ
\texorpdfstring{$4 \times 4$}{4 x 4}}
\begin{theorem}
    \label{comm:sol to 2 x m}
    קיים פתרון אופטימלי למשחק 
    $2 \times m$
    כאשר 
    $m$
    הוא אי זוגי.
\end{theorem}
\begin{proof}
    נוכיח בעזרת אינדוקציה.
    נתחיל על לוח 
    $2 \times 1$,
    כל לחיצה בודדת על משבצת מובילה לפתרון אופטימלי של המשחק.
    נניח וקיים לוח 
    $2 \times m$
    בו מתקיים פתרון אופטימלי
    כאשר 
    $m$
    אי זוגי.
    ללוח קיים פתרון אופטימלי 
    לכן הנורות השתנו רק פעם אחת,
    מה שאומר שמשבצות בעמודה האחרונה 
    בהכרח שונו על ידי אותה לחיצה.
    לחיצה זו בהכרח תהיה על משבצת בעמודה האחרונה.
    נניח, בלי הגבלת הכלליות, שהמשבצת שנלחצה היא בשורה 
    $1$.
    עבור לוח 
    $2 \times (m+2)$
    נבצע את אותם מהלכים כמו שביצענו עבור לוח 
    $2 \times m$.
    נשים לב 
    שהנורות שנותרו במצבם ההתחלתי הן:
    \[ \{n_{1,m+2}, n_{2,m+1}, n_{2,m+2}\} \]
    נשים לב שלחיצה על 
    משבצת 
    $n_{2,m+1}$
    פותרת את המשחק.
\end{proof}
\begin{comm}
    טענה 
    \ref{comm:sol to 2 x m}
    אינה נכונה עבור לוח 
    $m$
    זוגי.
    לדוגמה
    ללוח 
    $2 \times 2$
    כל לחיצה בודדת תוביל למשבצת בודדת שתישאר במצבה ההתחלתי.
    לכן, כל לחיצה נוספת תשנה את שאר הנורות והפתרון שיתקבל אינו אופטימלי.
\end{comm}

\begin{figure}[ht]
    \caption{פתרון ללוח 
    $2 \times 9$}
    \label{fig: 2x9 have min sol}
    % \unsethebrew
    \centering
    \[\begin{array}{|
        p{0.2cm}|p{0.2cm}|p{0.2cm}|
        p{0.2cm}|p{0.2cm}|p{0.2cm}|
        p{0.2cm}|p{0.2cm}|p{0.2cm}|}
        \hline
        \cellcolor{ansi-red}*&\cellcolor{ansi-red} &\cellcolor{ansi-green} &
        \cellcolor{ansi-blue}&\cellcolor{ansi-blue}* &\cellcolor{ansi-blue} &
        \cellcolor{ansi-yellow}&\cellcolor{ansi-red}&\cellcolor{ansi-red}* \\
        \hline
        \cellcolor{ansi-red}&\cellcolor{ansi-green} &\cellcolor{ansi-green}* &
        \cellcolor{ansi-green}&\cellcolor{ansi-blue} &\cellcolor{ansi-yellow} &
        \cellcolor{ansi-yellow}&\cellcolor{ansi-yellow}* &\cellcolor{ansi-red}\\
        \hline
    \end{array}\]
\end{figure}

כדי להוכיח טענת הכותרת של תת הפרק הזה, נעזר בלוח שרירותי כלשהו.
\begin{theorem}
    \label{thm:cant-press-a11}
    עבור לוח בעל מימד כלשהו גדול מ
    $3$,
    אין פתרון 
    אופטימלי בו המשבצת בראשית הצירים נלחצה.
\end{theorem}
\begin{proof}
    לאחר לחיצה על 
    $a_{1,1}$
    מתקבל הלוח הבאה:
    \[\begin{array}{|p{0.2cm}|p{0.2cm}|p{0.2cm}|p{0.2cm}|}
        \hline
        \cellcolor{ansi-red} *&\cellcolor{ansi-red} & & \\
        \hline
        \cellcolor{ansi-red}&  & &  \\
        \hline
         & & &  \\
        \hline
    \end{array}\]
    כדי להדליק 
    את הנורה
    $a_{2,2}$
    נצטרך 
    ללחוץ
    על
    $a_{2,3}$
    או 
    $a_{3,2}$
    .
    אם נילחץ על
   $a_{2,3}$
   נקבל את הלוח הבאה:
   \[\begin{array}{|p{0.2cm}|p{0.2cm}|p{0.2cm}|p{0.2cm}|}
    \hline
    \cellcolor{ansi-red} *&\cellcolor{ansi-red} &\cellcolor{ansi-green}& \\
    \hline
    \cellcolor{ansi-red}& \cellcolor{ansi-green}  & \cellcolor{ansi-green}*& \cellcolor{ansi-green}  \\
    \hline
     & &\cellcolor{ansi-green} &  \\
    \hline
    \end{array}\]
    נשים לב שהגענו למבוי סתום 
    משום שניתן להדליק את 
    $a_{3,2}$
    רק על ידי לחיצה על 
   $a_{4,2}$,
   לאחר מכן לא היה ניתן להדליק את 
   $a_{3,1}$.
   ניתוח דומה אפשר לתאר עבור 
   לחיצה על 
   $a_{3,2}$.
\end{proof}
לפי טענה
\ref{thm:cant-press-a11}
אם ברצוננו למצוא פתרון אופטימלי ללוח האינסופי לא נוכל 
להדליק את נורה 
$a_{1,1}$
על ידי לחיצה עליו.
לכן על מנת להדליק את 
$a_{1,1}$
נהיה חייבים ללחוץ על 
$a_{1,2}$
או 
$a_{2,1}$.
בשלב זה נראה שגם לחיצה על 
$a_{1,2}$
לא תוביל למציאת פתרון אופטימלי.
היות והלוח סימטרי גם
לחיצה על 
$a_{2,1}$
לא תוביל למציאת פתרון אופטימלי.

אם לחצנו על משבצת 
$a_{1,2}$ 
אז על מנת להדליק את 
$a_{2,1}$
בלי ללחוץ עליו חייבים ללחוץ על 
$a_{3,1}$
.
אז על מנת להדליק 
את 
$a_{2,3}$
בלי ללחוץ עליו נלחץ על 
$a_{2,4}$.
\\
מתקבל הלוח הבאה:
\[\begin{array}{|p{0.2cm}|p{0.2cm}|p{0.2cm}|p{0.2cm}|}
    \hline
    \cellcolor{ansi-red} &\cellcolor{ansi-red}* &\cellcolor{ansi-red}& \cellcolor{ansi-green}\\
    \hline
    \cellcolor{ansi-blue}& \cellcolor{ansi-red}  & \cellcolor{ansi-green}* & \cellcolor{ansi-green}  \\
    \hline
        \cellcolor{ansi-blue}*& \cellcolor{ansi-blue}  &  & \cellcolor{ansi-green}  \\
    \hline
\end{array}\]
זה כבר מוכיח שלכל 
לוח 
$3 \times n$
כאשר 
$n > 2$
אין פתרון.

אחרי שלחצנו על 
$a_{2,4}$
על מנת להדליק 
$a_{3,3}$
בלי ללחוץ עליה חייבים ללחוץ על 
$a_{4,3}$
.
אם מדובר על 
לוח 
$4 \times 4$
זה נותן פתרון אופטימלי עבורו.
אם לא,
אז על מנת להדליק 
$a_5,2$
בלי ללחוץ עליה חייבים ללחוץ על 
$a_{6,2}$
וזה מביא למובי סתום,
כפי שניתן לראות בלוח הבאה:
\[\begin{array}{|p{0.2cm}|p{0.2cm}|p{0.2cm}|p{0.2cm}|p{0.2cm}|}
    \hline
    \cellcolor{ansi-red} &\cellcolor{ansi-red}* &\cellcolor{ansi-red}& \cellcolor{ansi-green} &\\
    \hline
    \cellcolor{ansi-blue}& \cellcolor{ansi-red}  & \cellcolor{ansi-green}* & \cellcolor{ansi-green} & \cellcolor{ansi-green}  \\
    \hline
    \cellcolor{ansi-blue}*& \cellcolor{ansi-blue}  & \cellcolor{ansi-yellow}  & \cellcolor{ansi-green} & \\
    \hline
    \cellcolor{ansi-blue}& \cellcolor{ansi-yellow}  & \cellcolor{ansi-yellow} * & \cellcolor{ansi-yellow} &\\
    \hline
        & \cellcolor{ansi-red}  &\cellcolor{ansi-yellow}  & & \\
        \hline
        \cellcolor{ansi-red} &\cellcolor{ansi-red}*  &  & & \\
    \hline
\end{array}\]
קח הוכחנו שלכל לוח 
$m \times n$
כאשר 
$\min\{m,n\} > 4$
אין פתרון אופטימלי.

\subsection{אלגוריתם למציאת פתרון אופטימלי}
נציעה דרך לחפש פתרון 
אופטימלי
בעזרת שימוש במטריצה שכנויות כפי שהגדרנו
בהגדרה 
\ref{def: neighbor matrix},
ההבדל הוא שהפעם נגדיר את המטריצה על החוג 
$\mathbb{Z}$.
שימוש בחוג 
$\mathbb{Z}$
מאלץ את הפתרונות המתקבלים
להדליק את כל נורות רק פעם אחת.
התיאוריה שפיתחנו באלגברה לינארית הייתה תקפה לשדות 
אבל כלי התכנות שהשתמשנו
בעבודה זו יודע לפתור גם על חוג השלמים.

אלגוריתם זה ממוש ומופיע בפרק נספחים בדקנו שאכן אלגוריתם מוצא פתרונות אופטימלי.

\begin{figure}[ht]
    \caption{פתרון ללוח 
    $4 \times 4$}
    \label{fig:4x4_have_min_sol}
    % \unsethebrew
    \centering
    \[\begin{array}{|p{0.2cm}|p{0.2cm}|p{0.2cm}|p{0.2cm}|}
        \hline
        \cellcolor{ansi-red} &\cellcolor{ansi-red}* &\cellcolor{ansi-red}& \cellcolor{ansi-green} \\
        \hline
        \cellcolor{ansi-blue}& \cellcolor{ansi-red}  & \cellcolor{ansi-green}* & \cellcolor{ansi-green} \\
        \hline
        \cellcolor{ansi-blue}*& \cellcolor{ansi-blue}  & \cellcolor{ansi-yellow}  & \cellcolor{ansi-green} \\
        \hline
        \cellcolor{ansi-blue}& \cellcolor{ansi-yellow}  & \cellcolor{ansi-yellow} * & \cellcolor{ansi-yellow} \\
        \hline
    \end{array}\]
\end{figure}

\newpage
\section{נספחים}
מימוש של הפרויקט בוצע על ידי 
שפת 
{Python}
בעזרת הספריות
{Sage}
ו
numpy.
\input{light_out_jupyter.tex}
% \sethebrew
%----------------------------------------------------------------------------------------
%   רשימת מקורות
%----------------------------------------------------------------------------------------
\newpage
{
    \begin{thebibliography}{99}
        % \unsethebrew
        \begin{english}
        \bibitem{B1}
        Rafael Losada
        Translated from Spanish by Ángeles Vallejo,
            ALL LIGHTS AND LIGHTS OUT,
        SUMA magazine’s 
        \bibitem{B2}
        Jamie Mulholland
            Permutation Puzzles
        Lecture 24: Light out Puzzle , SFU faculty of science department of mathematic
        \bibitem{Sutner}
        K. Sutner, Linear Cellular Automata and the Garden-of-Eden, The Mathematical Intelligencer, Vol. 11, No. 29, 1989, Springer-Verlag, New York.		
        \end{english}
        \bibitem{B3}
        אברהם ברמן, בן-ציון קון, 
        אלגברה ליניארית, תיאוריה ותרגילים
        , הוצאת בק, חיפה, 1999.
        \end{thebibliography}
}


\end{document} 
